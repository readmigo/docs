# é˜…è¯»æŒ‡å—ç³»ç»Ÿè®¾è®¡æ–‡æ¡£

> æ¨¡å—åç§°: Reading Guide Module
> çŠ¶æ€: âœ… å·²å®ç° (å¾…æ•°æ®å¡«å……)
> ä¼˜å…ˆçº§: P1

---

## 1. åŠŸèƒ½æ¦‚è¿°

é˜…è¯»æŒ‡å—ä¸ºè·¨æ–‡åŒ–é˜…è¯»è€…æä¾›é’ˆå¯¹æ¯æœ¬ä¹¦çš„ä¸ªæ€§åŒ–é˜…è¯»å»ºè®®ï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿè¿›å…¥é˜…è¯»çŠ¶æ€ã€äº†è§£æ•…äº‹è„‰ç»œã€é¿å¼€æ–‡åŒ–ç†è§£éšœç¢ã€‚

### 1.1 æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| é˜…è¯»æ³¨æ„äº‹é¡¹ | è·¨æ–‡åŒ–é˜…è¯»éš¾ç‚¹æé†’ (å¦‚æ³•è¯­è¯æ±‡ã€æˆ˜äº‰æå†™ç­‰) | âœ… å·²å®ç° |
| æ•…äº‹çº¿ | å‰§æƒ…æ¢—æ¦‚å’Œæ•…äº‹è„‰ç»œ | âœ… å·²å®ç° |
| å¿«é€Ÿè¿›å…¥é˜…è¯» | é™ä½è®¤çŸ¥é—¨æ§›çš„å»ºè®® (å¦‚èƒŒæ™¯çŸ¥è¯†è¡¥å……) | âœ… å·²å®ç° |
| å¤šè¯­è¨€æ”¯æŒ | æ”¯æŒ en / zh-Hans / zh-Hant | âœ… å·²å®ç° |
| AI ç”Ÿæˆæ ‡è¯† | æ˜¾ç¤ºå†…å®¹æ¥æº (AI ç”Ÿæˆ / äººå·¥ç¼–å†™) | âœ… å·²å®ç° |

### 1.2 ç›®æ ‡ç”¨æˆ·

- éæ¯è¯­é˜…è¯»è€… (ESL å­¦ä¹ è€…)
- å¯¹è¥¿æ–¹æ–‡åŒ–èƒŒæ™¯ä¸ç†Ÿæ‚‰çš„è¯»è€…
- å¸Œæœ›å¿«é€Ÿäº†è§£ä¹¦ç±å†…å®¹çš„è¯»è€…

---

## 2. æ•°æ®æ¨¡å‹

### 2.1 å®ä½“å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       1:1        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Book     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  ReadingGuide   â”‚
â”‚             â”‚                  â”‚                 â”‚
â”‚ id (PK)     â”‚                  â”‚ id (PK)         â”‚
â”‚ title       â”‚                  â”‚ bookId (FK, UQ) â”‚
â”‚ author      â”‚                  â”‚ sourceType      â”‚
â”‚ ...         â”‚                  â”‚ aiModel         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ generatedAt     â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ 1:N
                                          â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚ ReadingGuideTranslation â”‚
                                 â”‚                         â”‚
                                 â”‚ id (PK)                 â”‚
                                 â”‚ readingGuideId (FK)     â”‚
                                 â”‚ language                â”‚
                                 â”‚ readingWarnings         â”‚
                                 â”‚ storyTimeline           â”‚
                                 â”‚ quickStartGuide         â”‚
                                 â”‚                         â”‚
                                 â”‚ UNIQUE(guideId, lang)   â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ReadingGuide å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | UUID | ä¸»é”® |
| bookId | UUID | å…³è”ä¹¦ç± (ä¸€å¯¹ä¸€, å”¯ä¸€) |
| sourceType | ENUM | AI_GENERATED / MANUAL |
| aiModel | VARCHAR(50) | AI æ¨¡å‹åç§° (å¦‚ claude-3-5-sonnet) |
| generatedAt | TIMESTAMP | ç”Ÿæˆæ—¶é—´ |
| createdAt | TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updatedAt | TIMESTAMP | æ›´æ–°æ—¶é—´ |

### 2.3 ReadingGuideTranslation å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | UUID | ä¸»é”® |
| readingGuideId | UUID | å…³è”é˜…è¯»æŒ‡å— |
| language | VARCHAR(10) | è¯­è¨€ä»£ç  (en, zh-Hans, zh-Hant) |
| readingWarnings | TEXT | é˜…è¯»æ³¨æ„äº‹é¡¹ |
| storyTimeline | TEXT | æ•…äº‹çº¿/å‰§æƒ…æ¢—æ¦‚ |
| quickStartGuide | TEXT | å¿«é€Ÿè¿›å…¥é˜…è¯»å»ºè®® |

**å”¯ä¸€çº¦æŸ**: (readingGuideId, language)

---

## 3. API è®¾è®¡

### 3.1 è·å–é˜…è¯»æŒ‡å—

```
GET /books/:id/reading-guide
```

**è¯·æ±‚å¤´**

| Header | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| Accept-Language | é¦–é€‰è¯­è¨€ | zh-Hans, zh-Hant, en |

**å“åº”å­—æ®µ**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | string | é˜…è¯»æŒ‡å— ID |
| bookId | string | ä¹¦ç± ID |
| sourceType | string | AI_GENERATED / MANUAL |
| aiModel | string? | AI æ¨¡å‹åç§° |
| generatedAt | string | ISO æ—¶é—´æˆ³ |
| readingWarnings | string? | é˜…è¯»æ³¨æ„äº‹é¡¹ (å·²æœ¬åœ°åŒ–) |
| storyTimeline | string? | æ•…äº‹çº¿ (å·²æœ¬åœ°åŒ–) |
| quickStartGuide | string? | å¿«é€Ÿè¿›å…¥é˜…è¯» (å·²æœ¬åœ°åŒ–) |
| locale | string? | å½“å‰è¿”å›çš„è¯­è¨€ |
| availableTranslations | string[] | å¯ç”¨ç¿»è¯‘åˆ—è¡¨ |

**å“åº”ç¤ºä¾‹åœºæ™¯**

| åœºæ™¯ | çŠ¶æ€ç  | è¿”å›å€¼ |
|------|--------|--------|
| æœ‰æ•°æ® | 200 | å®Œæ•´å¯¹è±¡ |
| æ— æ•°æ® | 200 | null |
| ä¹¦ç±ä¸å­˜åœ¨ | 404 | é”™è¯¯ä¿¡æ¯ |

---

## 4. UI è®¾è®¡

### 4.1 é¡µé¢ä½ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¹¦ç±è¯¦æƒ…é¡µ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“– ç®€ä»‹                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“š é˜…è¯»æŒ‡å—  â† æ–°å¢åŒºåŸŸ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ åˆ›ä½œèƒŒæ™¯                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‘ ç« èŠ‚åˆ—è¡¨                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ç»„ä»¶ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“š é˜…è¯»æŒ‡å—                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âš ï¸ é˜…è¯»æ³¨æ„äº‹é¡¹              â–²     â”‚â”‚ â† å¯æŠ˜å å¡ç‰‡
â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚ æœ¬ä¹¦åŒ…å«å¤§é‡æ³•è¯­è¯æ±‡ï¼Œå»ºè®®è¯»è€…å…ˆ    â”‚â”‚
â”‚  â”‚ äº†è§£åŸºæœ¬çš„æ³•è¯­é—®å€™è¯­ã€‚ä¹¦ä¸­æœ‰è¾ƒå¤š    â”‚â”‚
â”‚  â”‚ å…³äºæ‹¿ç ´ä»‘æˆ˜äº‰çš„æå†™...             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“– æ•…äº‹çº¿                    â–²     â”‚â”‚ â† å¯æŠ˜å å¡ç‰‡
â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚ æ•…äº‹å‘ç”Ÿåœ¨19ä¸–çºªçš„å·´é»ã€‚ä¸»äººå…¬      â”‚â”‚
â”‚  â”‚ å†‰é˜¿è®©æ˜¯ä¸€åé‡Šæ”¾çš„å›šçŠ¯ï¼Œä»–è¯•å›¾      â”‚â”‚
â”‚  â”‚ é‡æ–°å¼€å§‹è‡ªå·±çš„ç”Ÿæ´»...               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âš¡ å¿«é€Ÿè¿›å…¥é˜…è¯»               â–²     â”‚â”‚ â† å¯æŠ˜å å¡ç‰‡
â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚ å»ºè®®å…ˆäº†è§£æ³•å›½å¤§é©å‘½å’Œæ‹¿ç ´ä»‘æ—¶æœŸ    â”‚â”‚
â”‚  â”‚ çš„ç¤¾ä¼šèƒŒæ™¯ï¼Œè¿™å°†å¸®åŠ©ä½ ç†è§£äººç‰©      â”‚â”‚
â”‚  â”‚ çš„è¡Œä¸ºåŠ¨æœºå’Œç¤¾ä¼šç¯å¢ƒ...             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  âœ¨ AI ç”Ÿæˆ                              â”‚ â† æ¥æºæ ‡è¯†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 äº¤äº’è¡Œä¸º

| æ“ä½œ | è¡Œä¸º |
|------|------|
| åˆå§‹çŠ¶æ€ | æ‰€æœ‰å¡ç‰‡é»˜è®¤å±•å¼€ |
| ç‚¹å‡»å¡ç‰‡æ ‡é¢˜ | åˆ‡æ¢å±•å¼€/æŠ˜å çŠ¶æ€ |
| æŠ˜å çŠ¶æ€ | ä»…æ˜¾ç¤ºæ ‡é¢˜ + â–¼ å›¾æ ‡ |
| å±•å¼€çŠ¶æ€ | æ˜¾ç¤ºæ ‡é¢˜ + â–² å›¾æ ‡ + å®Œæ•´å†…å®¹ |
| æ— æ•°æ®æ—¶ | æ•´ä¸ªåŒºåŸŸä¸æ˜¾ç¤º |
| åŠ è½½ä¸­ | æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ |

### 4.4 å›¾æ ‡å¯¹ç…§

| åŒºåŸŸ | SF Symbol |
|------|-----------|
| é˜…è¯»æŒ‡å—æ ‡é¢˜ | book.and.wrench |
| é˜…è¯»æ³¨æ„äº‹é¡¹ | exclamationmark.triangle |
| æ•…äº‹çº¿ | text.book.closed |
| å¿«é€Ÿè¿›å…¥é˜…è¯» | bolt.fill |
| AI ç”Ÿæˆæ ‡è¯† | sparkles |
| å±•å¼€ | chevron.up |
| æŠ˜å  | chevron.down |

---

## 5. æœ¬åœ°åŒ–

### 5.1 UI å­—ç¬¦ä¸²

| Key | English | ç®€ä½“ä¸­æ–‡ | ç¹é«”ä¸­æ–‡ |
|-----|---------|----------|----------|
| readingGuide.title | Reading Guide | é˜…è¯»æŒ‡å— | é–±è®€æŒ‡å— |
| readingGuide.loading | Loading reading guide... | åŠ è½½é˜…è¯»æŒ‡å—ä¸­... | è¼‰å…¥é–±è®€æŒ‡å—ä¸­... |
| readingGuide.warnings | Reading Notes | é˜…è¯»æ³¨æ„äº‹é¡¹ | é–±è®€æ³¨æ„äº‹é … |
| readingGuide.storyTimeline | Story Timeline | æ•…äº‹çº¿ | æ•…äº‹ç·š |
| readingGuide.quickStart | Quick Start | å¿«é€Ÿè¿›å…¥é˜…è¯» | å¿«é€Ÿé€²å…¥é–±è®€ |
| readingGuide.aiGenerated | AI Generated | AI ç”Ÿæˆ | AI ç”Ÿæˆ |

---

## 6. æ–‡ä»¶æ¸…å•

### 6.1 åç«¯

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|----------|------|
| packages/database/prisma/schema.prisma | æ•°æ®æ¨¡å‹å®šä¹‰ |
| apps/backend/src/modules/books/dto/index.ts | DTO å®šä¹‰ |
| apps/backend/src/modules/books/books.service.ts | æœåŠ¡å±‚é€»è¾‘ |
| apps/backend/src/modules/books/books.controller.ts | API ç«¯ç‚¹ |

### 6.2 iOS

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|----------|------|
| ios/Readmigo/Core/Models/Book.swift | ReadingGuide æ•°æ®æ¨¡å‹ |
| ios/Readmigo/Core/Network/APIEndpoints.swift | API ç«¯ç‚¹å®šä¹‰ |
| ios/Readmigo/Features/Library/Components/ReadingGuideSection.swift | UI ç»„ä»¶ |
| ios/Readmigo/Features/Library/BookDetailView.swift | é¡µé¢é›†æˆ |
| ios/Readmigo/Localizable.xcstrings | æœ¬åœ°åŒ–å­—ç¬¦ä¸² |

---

## 7. å¾…åŠäº‹é¡¹

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| ä¸º 200+ æœ¬ä¹¦ç”Ÿæˆé˜…è¯»æŒ‡å—å†…å®¹ | P1 | ğŸ”² å¾…å¼€å§‹ |
| Android ç«¯å®ç° | P2 | ğŸ”² å¾…å¼€å§‹ |
| ç”¨æˆ·åé¦ˆæœºåˆ¶ (å†…å®¹æœ‰è¯¯) | P3 | ğŸ”² å¾…å¼€å§‹ |

---

## 8. æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| 2025-01-06 | v1.0 | åˆå§‹å®ç° (æ•°æ®åº“ + åç«¯ + iOS) |

# Android 探索模块

> 书籍发现 + 推荐 + 搜索

---

## 1. 模块概览

```
┌─────────────────────────────────────────────────────────────────┐
│                    探索架构                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                   ExploreScreen                          │    │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐ │    │
│  │  │  推荐    │  │   分类   │  │   排行   │  │  搜索   │ │    │
│  │  │ Recommend│  │ Category │  │ Ranking  │  │ Search  │ │    │
│  │  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬────┘ │    │
│  └───────┼─────────────┼─────────────┼─────────────┼───────┘    │
│          │             │             │             │             │
│          ▼             ▼             ▼             ▼             │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                  ExploreViewModel                        │    │
│  └────────────────────────┬────────────────────────────────┘    │
│                           │                                      │
│                           ▼                                      │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                   Domain Layer                           │    │
│  │  RecommendUseCase │ SearchUseCase │ CategoryUseCase     │    │
│  └────────────────────────┬────────────────────────────────┘    │
│                           │                                      │
│                           ▼                                      │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                  BookRepository                          │    │
│  │  Remote (API) │ Local (Cache) │ Search (Algolia)        │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 核心功能

| 功能 | 说明 |
|------|------|
| 个性化推荐 | 基于阅读历史 |
| 分类浏览 | 按类别探索 |
| 排行榜 | 热门书籍 |
| 搜索 | 书名/作者搜索 |

---

## 3. 个性化推荐

### 3.1 推荐算法

```
┌─────────────────────────────────────────────────────────────────┐
│                    推荐系统                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  用户画像                                                        │
│  ├── 阅读历史                                                    │
│  ├── 阅读时长                                                    │
│  ├── 收藏书籍                                                    │
│  ├── 完读书籍                                                    │
│  └── 评分记录                                                    │
│                                                                  │
│  推荐策略                                                        │
│  ├── 协同过滤: 相似用户喜欢                                      │
│  ├── 内容推荐: 相似书籍                                          │
│  ├── 热门推荐: 流行趋势                                          │
│  └── 编辑推荐: 人工精选                                          │
│                                                                  │
│  推荐位置                                                        │
│  ├── 首页轮播                                                    │
│  ├── 猜你喜欢                                                    │
│  ├── 同类推荐                                                    │
│  └── 读完推荐                                                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 推荐类型

| 类型 | 说明 |
|------|------|
| 每日推荐 | 每天更新 |
| 猜你喜欢 | 个性化 |
| 同作者 | 同一作者作品 |
| 同类型 | 相似类型 |

---

## 4. 分类浏览

### 4.1 分类体系

```
┌─────────────────────────────────────────────────────────────────┐
│                    书籍分类                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  一级分类                                                        │
│  ├── 小说                                                        │
│  │   ├── 经典文学                                                │
│  │   ├── 当代小说                                                │
│  │   ├── 科幻小说                                                │
│  │   └── 悬疑推理                                                │
│  │                                                              │
│  ├── 非虚构                                                      │
│  │   ├── 传记                                                    │
│  │   ├── 历史                                                    │
│  │   ├── 科普                                                    │
│  │   └── 社科                                                    │
│  │                                                              │
│  ├── 学习                                                        │
│  │   ├── 语言学习                                                │
│  │   ├── 技能提升                                                │
│  │   └── 考试资料                                                │
│  │                                                              │
│  └── 儿童                                                        │
│      ├── 绘本                                                    │
│      └── 童话                                                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 分类筛选

| 筛选项 | 选项 |
|--------|------|
| 语言 | 中文/英文/双语 |
| 难度 | 初级/中级/高级 |
| 长度 | 短篇/中篇/长篇 |
| 排序 | 热度/新书/评分 |

---

## 5. 排行榜

### 5.1 榜单类型

```
┌─────────────────────────────────────────────────────────────────┐
│                    排行榜                                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  热度榜                                                          │
│  ├── 周榜                                                        │
│  ├── 月榜                                                        │
│  └── 总榜                                                        │
│                                                                  │
│  新书榜                                                          │
│  ├── 本周新书                                                    │
│  └── 本月新书                                                    │
│                                                                  │
│  好评榜                                                          │
│  ├── 高评分                                                      │
│  └── 好评最多                                                    │
│                                                                  │
│  分类榜                                                          │
│  ├── 各分类热门                                                  │
│  └── 各语言热门                                                  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 5.2 榜单展示

| 元素 | 说明 |
|------|------|
| 排名 | 数字徽章 |
| 封面 | 书籍封面 |
| 信息 | 书名/作者/评分 |
| 变化 | 排名变动 |

---

## 6. 搜索功能

### 6.1 搜索流程

```
┌─────────────────────────────────────────────────────────────────┐
│                    搜索流程                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  输入关键词                                                      │
│       │                                                          │
│       ▼                                                          │
│  显示搜索建议                                                    │
│       │                                                          │
│       ▼                                                          │
│  执行搜索                                                        │
│       │                                                          │
│       ├──────────────┐                                          │
│       ▼              ▼                                          │
│  本地搜索       远程搜索                                         │
│       │              │                                          │
│       └──────┬───────┘                                          │
│              ▼                                                   │
│       合并结果                                                   │
│              │                                                   │
│              ▼                                                   │
│       显示结果                                                   │
│              │                                                   │
│              ▼                                                   │
│       保存搜索历史                                               │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6.2 搜索特性

| 特性 | 说明 |
|------|------|
| 即时搜索 | 输入即搜索 |
| 搜索建议 | 自动补全 |
| 历史记录 | 最近搜索 |
| 热门搜索 | 热门关键词 |
| 语音搜索 | 语音输入 |

---

## 7. 书籍详情

### 7.1 详情页

```
┌─────────────────────────────────────────────────────────────────┐
│                    书籍详情页                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  头部信息                                                        │
│  ├── 封面图                                                      │
│  ├── 书名                                                        │
│  ├── 作者                                                        │
│  ├── 评分                                                        │
│  └── 标签                                                        │
│                                                                  │
│  操作按钮                                                        │
│  ├── 开始阅读                                                    │
│  ├── 添加书架                                                    │
│  └── 分享                                                        │
│                                                                  │
│  书籍信息                                                        │
│  ├── 简介                                                        │
│  ├── 章节目录                                                    │
│  ├── 出版信息                                                    │
│  └── 阅读统计                                                    │
│                                                                  │
│  相关推荐                                                        │
│  ├── 同作者                                                      │
│  └── 同类型                                                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 7.2 交互操作

| 操作 | 说明 |
|------|------|
| 开始阅读 | 打开阅读器 |
| 添加书架 | 收藏到书架 |
| 试读 | 免费章节 |
| 评分 | 用户评价 |

---

## 8. 作者页面

### 8.1 作者信息

```
┌─────────────────────────────────────────────────────────────────┐
│                    作者页面                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  作者信息                                                        │
│  ├── 头像                                                        │
│  ├── 姓名                                                        │
│  ├── 简介                                                        │
│  └── 作品数量                                                    │
│                                                                  │
│  作品列表                                                        │
│  ├── 全部作品                                                    │
│  ├── 热门作品                                                    │
│  └── 最新作品                                                    │
│                                                                  │
│  相关作者                                                        │
│  └── 同类型作者推荐                                              │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 8.2 作者操作

| 操作 | 说明 |
|------|------|
| 关注 | 关注作者 |
| 全部作品 | 查看所有书籍 |
| 分享 | 分享作者页面 |

---

## 9. 缓存策略

### 9.1 缓存管理

```
┌─────────────────────────────────────────────────────────────────┐
│                    探索缓存                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  推荐缓存                                                        │
│  ├── 有效期: 1 小时                                             │
│  └── 更新策略: 后台刷新                                          │
│                                                                  │
│  分类缓存                                                        │
│  ├── 有效期: 24 小时                                            │
│  └── 更新策略: 启动时检查                                        │
│                                                                  │
│  排行榜缓存                                                      │
│  ├── 有效期: 6 小时                                             │
│  └── 更新策略: 定时刷新                                          │
│                                                                  │
│  搜索缓存                                                        │
│  ├── 搜索结果: 15 分钟                                          │
│  └── 搜索建议: 1 小时                                           │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 9.2 离线支持

| 内容 | 离线可用 |
|------|----------|
| 已缓存推荐 | 是 |
| 分类列表 | 是 |
| 搜索 | 仅历史 |
| 新内容 | 否 |

---

## 10. 相关文档

| 文档 | 说明 |
|------|------|
| [library.md](./library.md) | 书架模块 |
| [reader.md](./reader.md) | 阅读器 |
| [../architecture.md](../architecture.md) | 架构设计 |

---

*最后更新: 2025-12-31*

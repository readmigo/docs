# iOS 设计系统

> SwiftUI + Human Interface Guidelines + 主题系统

---

## 1. 设计系统概览

```
┌─────────────────────────────────────────────────────────────────┐
│                    设计系统架构                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                    设计基础                              │    │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐           │    │
│  │  │   颜色    │  │   字体    │  │   间距    │           │    │
│  │  │  Colors   │  │Typography │  │  Spacing  │           │    │
│  │  └───────────┘  └───────────┘  └───────────┘           │    │
│  └─────────────────────────────────────────────────────────┘    │
│                              │                                   │
│  ┌───────────────────────────┴─────────────────────────────┐    │
│  │                    基础组件                              │    │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐           │    │
│  │  │  Button   │  │   Input   │  │   Card    │           │    │
│  │  └───────────┘  └───────────┘  └───────────┘           │    │
│  └─────────────────────────────────────────────────────────┘    │
│                              │                                   │
│  ┌───────────────────────────┴─────────────────────────────┐    │
│  │                    复合组件                              │    │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐           │    │
│  │  │  BookCard │  │  Toolbar  │  │   Modal   │           │    │
│  │  └───────────┘  └───────────┘  └───────────┘           │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 颜色系统

### 2.1 语义化颜色

| 语义 | Light | Dark | 用途 |
|------|-------|------|------|
| Primary | #4A6FA5 | #5B8BD4 | 主要操作 |
| Secondary | #6B7280 | #9CA3AF | 次要内容 |
| Accent | #F59E0B | #FBBF24 | 强调元素 |
| Success | #10B981 | #34D399 | 成功状态 |
| Warning | #F59E0B | #FBBF24 | 警告状态 |
| Error | #EF4444 | #F87171 | 错误状态 |

### 2.2 颜色层级

```
┌─────────────────────────────────────────────────────────────────┐
│                    颜色层级系统                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  背景色 (Background)                                            │
│  ├── background           主背景                                │
│  ├── secondaryBackground  次级背景                              │
│  └── tertiaryBackground   三级背景                              │
│                                                                  │
│  内容色 (Content)                                               │
│  ├── label                主要文本                              │
│  ├── secondaryLabel       次要文本                              │
│  ├── tertiaryLabel        辅助文本                              │
│  └── quaternaryLabel      最弱文本                              │
│                                                                  │
│  分隔色 (Separator)                                             │
│  ├── separator            分隔线                                │
│  └── opaqueSeparator      不透明分隔                            │
│                                                                  │
│  填充色 (Fill)                                                  │
│  ├── fill                 标准填充                              │
│  ├── secondaryFill        次级填充                              │
│  └── tertiaryFill         三级填充                              │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. 字体系统

### 3.1 字体规范

| 样式 | 字号 | 字重 | 行高 | 用途 |
|------|------|------|------|------|
| largeTitle | 34pt | Bold | 41pt | 大标题 |
| title | 28pt | Bold | 34pt | 页面标题 |
| title2 | 22pt | Bold | 28pt | 区域标题 |
| title3 | 20pt | Semibold | 25pt | 小标题 |
| headline | 17pt | Semibold | 22pt | 强调文本 |
| body | 17pt | Regular | 22pt | 正文 |
| callout | 16pt | Regular | 21pt | 标注 |
| subheadline | 15pt | Regular | 20pt | 副标题 |
| footnote | 13pt | Regular | 18pt | 注脚 |
| caption | 12pt | Regular | 16pt | 说明 |
| caption2 | 11pt | Regular | 13pt | 小说明 |

### 3.2 阅读器字体

```
┌─────────────────────────────────────────────────────────────────┐
│                    阅读器字体                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  系统字体                                                        │
│  ├── San Francisco (系统默认)                                   │
│  ├── New York (衬线字体)                                        │
│  └── SF Mono (等宽字体)                                         │
│                                                                  │
│  自定义字体                                                      │
│  ├── 思源宋体 (中文衬线)                                         │
│  ├── 思源黑体 (中文无衬线)                                       │
│  ├── Palatino (英文衬线)                                        │
│  └── Georgia (英文衬线)                                         │
│                                                                  │
│  字号范围                                                        │
│  ├── 最小: 12pt                                                 │
│  ├── 默认: 18pt                                                 │
│  ├── 最大: 32pt                                                 │
│  └── 调节步长: 2pt                                              │
│                                                                  │
│  行间距                                                          │
│  ├── 紧凑: 1.2x                                                 │
│  ├── 标准: 1.5x                                                 │
│  └── 宽松: 2.0x                                                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 间距系统

### 4.1 间距规范

| 级别 | 值 | 用途 |
|------|-----|------|
| xxs | 2pt | 微小间距 |
| xs | 4pt | 极小间距 |
| sm | 8pt | 小间距 |
| md | 16pt | 中等间距 |
| lg | 24pt | 大间距 |
| xl | 32pt | 超大间距 |
| xxl | 48pt | 特大间距 |

### 4.2 布局间距

```
┌─────────────────────────────────────────────────────────────────┐
│                    布局间距                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  屏幕边距                                                        │
│  ├── iPhone: 16pt                                               │
│  ├── iPad: 20pt                                                 │
│  └── Max: 24pt                                                  │
│                                                                  │
│  组件间距                                                        │
│  ├── 紧凑: 8pt                                                  │
│  ├── 标准: 16pt                                                 │
│  └── 宽松: 24pt                                                 │
│                                                                  │
│  卡片内边距                                                      │
│  ├── 小卡片: 12pt                                               │
│  ├── 中卡片: 16pt                                               │
│  └── 大卡片: 20pt                                               │
│                                                                  │
│  列表间距                                                        │
│  ├── 行高: 44pt (最小可点击)                                     │
│  └── 分组间距: 24pt                                              │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 圆角与阴影

### 5.1 圆角规范

| 级别 | 值 | 用途 |
|------|-----|------|
| none | 0pt | 无圆角 |
| xs | 4pt | 微小圆角 |
| sm | 8pt | 小圆角 |
| md | 12pt | 中等圆角 |
| lg | 16pt | 大圆角 |
| xl | 24pt | 超大圆角 |
| full | 50% | 圆形 |

### 5.2 阴影规范

```
┌─────────────────────────────────────────────────────────────────┐
│                    阴影层级                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  subtle (微弱)                                                   │
│  ├── color: black 5%                                           │
│  ├── radius: 2pt                                                │
│  ├── x: 0, y: 1                                                │
│  └── 用途: 轻微层级                                              │
│                                                                  │
│  small (小)                                                      │
│  ├── color: black 10%                                          │
│  ├── radius: 4pt                                                │
│  ├── x: 0, y: 2                                                │
│  └── 用途: 卡片、按钮                                            │
│                                                                  │
│  medium (中)                                                     │
│  ├── color: black 15%                                          │
│  ├── radius: 8pt                                                │
│  ├── x: 0, y: 4                                                │
│  └── 用途: 弹出层                                                │
│                                                                  │
│  large (大)                                                      │
│  ├── color: black 20%                                          │
│  ├── radius: 16pt                                               │
│  ├── x: 0, y: 8                                                │
│  └── 用途: 模态框                                                │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 主题系统

### 6.1 App 主题

| 主题 | 背景 | 文本 | 说明 |
|------|------|------|------|
| Light | #FFFFFF | #1F2937 | 默认浅色 |
| Dark | #1F2937 | #F9FAFB | 深色模式 |
| System | 跟随系统 | 跟随系统 | 自动切换 |

### 6.2 阅读器主题

```
┌─────────────────────────────────────────────────────────────────┐
│                    阅读器主题                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  纸白 (Paper White)                                             │
│  ├── 背景: #FFFFFF                                              │
│  ├── 文本: #1F2937                                              │
│  └── 适合: 日间阅读                                              │
│                                                                  │
│  暖黄 (Sepia)                                                   │
│  ├── 背景: #F5F0E1                                              │
│  ├── 文本: #5C4B37                                              │
│  └── 适合: 护眼阅读                                              │
│                                                                  │
│  浅灰 (Light Gray)                                              │
│  ├── 背景: #E5E7EB                                              │
│  ├── 文本: #374151                                              │
│  └── 适合: 减少对比                                              │
│                                                                  │
│  深灰 (Dark Gray)                                               │
│  ├── 背景: #374151                                              │
│  ├── 文本: #E5E7EB                                              │
│  └── 适合: 暗光环境                                              │
│                                                                  │
│  纯黑 (OLED Black)                                              │
│  ├── 背景: #000000                                              │
│  ├── 文本: #E5E7EB                                              │
│  └── 适合: OLED 省电                                            │
│                                                                  │
│  绿色 (Eye Care)                                                │
│  ├── 背景: #CCE8CF                                              │
│  ├── 文本: #2D5A3D                                              │
│  └── 适合: 长时间阅读                                            │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 7. 图标系统

### 7.1 SF Symbols

| 类别 | 示例 | 用途 |
|------|------|------|
| Navigation | chevron.left, xmark | 导航操作 |
| Actions | plus, minus, trash | 用户操作 |
| Media | play, pause, speaker | 媒体控制 |
| Status | checkmark, exclamationmark | 状态指示 |
| Objects | book, bookmark, note | 对象表示 |

### 7.2 图标规范

```
┌─────────────────────────────────────────────────────────────────┐
│                    图标规范                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  尺寸                                                            │
│  ├── Small: 16pt                                                │
│  ├── Medium: 20pt                                               │
│  ├── Large: 24pt                                                │
│  └── XLarge: 32pt                                               │
│                                                                  │
│  字重                                                            │
│  ├── ultralight                                                 │
│  ├── thin                                                       │
│  ├── light                                                      │
│  ├── regular (默认)                                             │
│  ├── medium                                                     │
│  ├── semibold                                                   │
│  ├── bold                                                       │
│  └── black                                                      │
│                                                                  │
│  渲染模式                                                        │
│  ├── monochrome        单色                                     │
│  ├── hierarchical      层级                                     │
│  ├── palette           调色板                                   │
│  └── multicolor        多色                                     │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 8. 动画规范

### 8.1 动画时长

| 类型 | 时长 | 用途 |
|------|------|------|
| instant | 100ms | 即时反馈 |
| fast | 200ms | 快速过渡 |
| normal | 300ms | 标准过渡 |
| slow | 500ms | 慢速过渡 |

### 8.2 动画曲线

```
┌─────────────────────────────────────────────────────────────────┐
│                    动画曲线                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  SwiftUI 内置曲线                                                │
│  ├── .linear           线性                                     │
│  ├── .easeIn           缓入                                     │
│  ├── .easeOut          缓出                                     │
│  ├── .easeInOut        缓入缓出                                  │
│  └── .spring()         弹簧效果                                  │
│                                                                  │
│  常用场景                                                        │
│  ├── 页面转场: easeInOut 0.3s                                   │
│  ├── 按钮反馈: spring response 0.3                              │
│  ├── 列表项: easeOut 0.2s                                       │
│  ├── 弹窗出现: spring damping 0.7                               │
│  └── 翻页动画: easeInOut 0.25s                                  │
│                                                                  │
│  无障碍                                                          │
│  └── 尊重 Reduce Motion 设置                                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 9. 基础组件

### 9.1 按钮组件

| 样式 | 用途 | 说明 |
|------|------|------|
| Primary | 主要操作 | 填充背景 |
| Secondary | 次要操作 | 边框样式 |
| Tertiary | 辅助操作 | 仅文本 |
| Destructive | 危险操作 | 红色强调 |
| Icon | 图标按钮 | 仅图标 |

### 9.2 输入组件

```
┌─────────────────────────────────────────────────────────────────┐
│                    输入组件                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  TextField                                                      │
│  ├── 高度: 44pt                                                 │
│  ├── 内边距: 12pt                                               │
│  ├── 圆角: 8pt                                                  │
│  ├── 边框: 1pt separator                                       │
│  └── 聚焦边框: primary color                                    │
│                                                                  │
│  TextEditor                                                     │
│  ├── 最小高度: 88pt                                             │
│  ├── 内边距: 12pt                                               │
│  └── 圆角: 8pt                                                  │
│                                                                  │
│  Picker                                                         │
│  ├── 样式: menu / wheel / segmented                            │
│  └── 高度: 44pt (segmented)                                    │
│                                                                  │
│  Toggle                                                         │
│  ├── 宽度: 51pt                                                 │
│  └── 高度: 31pt                                                 │
│                                                                  │
│  Slider                                                         │
│  ├── 高度: 29pt                                                 │
│  └── 滑块: 28pt × 28pt                                         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 10. 复合组件

### 10.1 BookCard

```
┌─────────────────────────────────────────────────────────────────┐
│                    BookCard 组件                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────┐                                    │
│  │                         │                                    │
│  │      封面图片            │  封面比例: 2:3                     │
│  │      (Cover)            │  圆角: 8pt                         │
│  │                         │  阴影: small                       │
│  │                         │                                    │
│  └─────────────────────────┘                                    │
│                                                                  │
│  书名 (Title)               字体: headline                      │
│  作者 (Author)              字体: subheadline, secondary       │
│  进度条 (Progress)          高度: 3pt, 圆角: 1.5pt             │
│                                                                  │
│  变体                                                            │
│  ├── Grid: 正方形网格布局                                        │
│  ├── List: 列表行布局                                            │
│  └── Featured: 大尺寸特色展示                                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 10.2 组件尺寸

| 组件 | 小 | 中 | 大 |
|------|-----|-----|-----|
| BookCard | 100×150 | 120×180 | 160×240 |
| Avatar | 32×32 | 44×44 | 64×64 |
| Button | 32pt 高 | 44pt 高 | 50pt 高 |

---

## 11. 无障碍设计

### 11.1 无障碍要求

```
┌─────────────────────────────────────────────────────────────────┐
│                    无障碍设计                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  颜色对比度                                                      │
│  ├── 正文文本: 至少 4.5:1                                       │
│  ├── 大文本: 至少 3:1                                           │
│  └── 非文本元素: 至少 3:1                                       │
│                                                                  │
│  触摸目标                                                        │
│  ├── 最小尺寸: 44×44 pt                                         │
│  └── 间距: 至少 8pt                                              │
│                                                                  │
│  VoiceOver 支持                                                 │
│  ├── 所有交互元素有 accessibility label                        │
│  ├── 图片有 accessibility description                          │
│  ├── 使用 accessibility traits                                 │
│  └── 支持 accessibility actions                                │
│                                                                  │
│  Dynamic Type                                                   │
│  ├── 支持所有文本大小                                            │
│  ├── 布局自适应                                                  │
│  └── 不截断文本                                                  │
│                                                                  │
│  Reduce Motion                                                  │
│  └── 提供简化动画选项                                            │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 11.2 无障碍测试

| 测试项 | 工具 |
|--------|------|
| VoiceOver | iOS 内置 |
| 颜色对比度 | Accessibility Inspector |
| 动态字体 | 模拟器设置 |
| 色盲模式 | Simulator 滤镜 |

---

## 12. 相关文档

| 文档 | 说明 |
|------|------|
| [architecture.md](./architecture.md) | 架构设计 |
| [performance.md](./performance.md) | 性能优化 |
| [reader-engine.md](./reader-engine.md) | 阅读器引擎 |

---

*最后更新: 2025-12-31*

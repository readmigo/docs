# iOS 设置功能

> 应用设置 + 账户管理 + 隐私控制

---

## 1. 功能概览

```
┌─────────────────────────────────────────────────────────────────┐
│                    设置功能架构                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                    账户设置                              │    │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐           │    │
│  │  │ 个人资料  │  │ 安全设置  │  │ 订阅管理  │           │    │
│  │  └───────────┘  └───────────┘  └───────────┘           │    │
│  └─────────────────────────────────────────────────────────┘    │
│                              │                                   │
│  ┌───────────────────────────┴─────────────────────────────┐    │
│  │                    应用设置                              │    │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐           │    │
│  │  │ 阅读设置  │  │ 通知设置  │  │ 存储管理  │           │    │
│  │  └───────────┘  └───────────┘  └───────────┘           │    │
│  └─────────────────────────────────────────────────────────┘    │
│                              │                                   │
│  ┌───────────────────────────┴─────────────────────────────┐    │
│  │                    隐私与关于                            │    │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐           │    │
│  │  │ 隐私设置  │  │ 帮助反馈  │  │ 关于应用  │           │    │
│  │  └───────────┘  └───────────┘  └───────────┘           │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 设置页面结构

### 2.1 设置分组

| 分组 | 内容 |
|------|------|
| 账户 | 个人资料、安全、订阅 |
| 阅读 | 主题、字体、翻页 |
| 通知 | 推送、提醒、学习 |
| 存储 | 缓存、下载、同步 |
| 隐私 | 数据、权限、追踪 |
| 关于 | 版本、帮助、法律 |

### 2.2 设置页面

```
┌─────────────────────────────────────────────────────────────────┐
│                    设置页面                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  [头像]  用户名                                    >     │    │
│  │          user@example.com                               │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  账户                                                            │
│  ├── 订阅管理                                              >    │
│  ├── 账户安全                                              >    │
│  └── 设备管理                                              >    │
│                                                                  │
│  阅读                                                            │
│  ├── 阅读设置                                              >    │
│  ├── 学习设置                                              >    │
│  └── TTS 设置                                              >    │
│                                                                  │
│  通用                                                            │
│  ├── 通知设置                                              >    │
│  ├── 存储管理                                              >    │
│  ├── 语言                                            简体中文   │
│  └── 深色模式                                         跟随系统   │
│                                                                  │
│  隐私                                                            │
│  ├── 隐私设置                                              >    │
│  └── 数据管理                                              >    │
│                                                                  │
│  关于                                                            │
│  ├── 帮助与反馈                                            >    │
│  ├── 评价应用                                              >    │
│  ├── 关于 Readmigo                                         >    │
│  └── 版本 1.0.0 (100)                                          │
│                                                                  │
│  [退出登录]                                                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. 阅读设置

### 3.1 阅读偏好

| 设置 | 选项 |
|------|------|
| 默认字体 | 系统/自定义字体 |
| 默认字号 | 12-32pt |
| 默认主题 | 纸白/暖黄/深色等 |
| 翻页方式 | 滑动/点击/仿真 |
| 屏幕常亮 | 开/关 |

### 3.2 阅读设置页面

```
┌─────────────────────────────────────────────────────────────────┐
│                    阅读设置                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  显示设置                                                        │
│  ├── 默认字体                                        系统默认   │
│  ├── 默认字号                                           18pt   │
│  ├── 行间距                                             1.5x   │
│  └── 默认主题                                           纸白   │
│                                                                  │
│  交互设置                                                        │
│  ├── 翻页方式                                         左右滑动   │
│  ├── 翻页动画                                             开    │
│  ├── 音量键翻页                                           关    │
│  └── 点击翻页区域                          左25% 中50% 右25%   │
│                                                                  │
│  其他设置                                                        │
│  ├── 屏幕常亮                                             开    │
│  ├── 自动亮度                                             开    │
│  ├── 状态栏显示                                           开    │
│  └── 时钟显示                                             开    │
│                                                                  │
│  进度设置                                                        │
│  ├── 自动同步进度                                         开    │
│  └── 章节结束提示                                         开    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 通知设置

### 4.1 通知类型

| 类型 | 说明 |
|------|------|
| 学习提醒 | 每日学习提醒 |
| 阅读提醒 | 阅读目标提醒 |
| 系统通知 | 更新、活动通知 |
| 社交通知 | 评论、点赞通知 |

### 4.2 通知配置

```
┌─────────────────────────────────────────────────────────────────┐
│                    通知设置                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  通知总开关                                                      │
│  └── 允许通知                                             开    │
│                                                                  │
│  学习提醒                                                        │
│  ├── 每日学习提醒                                         开    │
│  ├── 提醒时间                                          20:00   │
│  └── 待复习词汇提醒                                       开    │
│                                                                  │
│  阅读提醒                                                        │
│  ├── 阅读目标提醒                                         开    │
│  └── 提醒时间                                          21:00   │
│                                                                  │
│  系统通知                                                        │
│  ├── 版本更新通知                                         开    │
│  ├── 活动推送                                             开    │
│  └── 新书推荐                                             开    │
│                                                                  │
│  静默时段                                                        │
│  ├── 启用静默时段                                         开    │
│  └── 静默时间                                  22:00 - 08:00   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 存储管理

### 5.1 存储统计

| 项目 | 说明 |
|------|------|
| 书籍文件 | 下载的书籍 |
| 渲染缓存 | 页面渲染缓存 |
| 音频缓存 | TTS/音频缓存 |
| 其他数据 | 配置等数据 |

### 5.2 存储管理页面

```
┌─────────────────────────────────────────────────────────────────┐
│                    存储管理                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  存储概览                                                        │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  总占用: 2.5 GB                                          │    │
│  │                                                          │    │
│  │  ██████████████████████░░░░░░░░                         │    │
│  │  书籍 2.0G  缓存 300M  其他 200M                        │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  详细统计                                                        │
│  ├── 书籍文件                                          2.0 GB   │
│  ├── 渲染缓存                                          200 MB   │
│  ├── 音频缓存                                          100 MB   │
│  ├── 图片缓存                                           50 MB   │
│  └── 其他数据                                          150 MB   │
│                                                                  │
│  清理选项                                                        │
│  ├── [清理渲染缓存]                                可释放 200MB │
│  ├── [清理音频缓存]                                可释放 100MB │
│  └── [清理所有缓存]                                可释放 350MB │
│                                                                  │
│  下载管理                                                        │
│  ├── 仅 WiFi 下载                                         开    │
│  ├── 自动删除已读                                         关    │
│  └── 下载质量                                           高清    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 隐私设置

### 6.1 隐私选项

| 选项 | 说明 |
|------|------|
| 数据收集 | 使用数据收集 |
| 崩溃报告 | 自动发送崩溃 |
| 分析数据 | 匿名分析数据 |
| 个性化推荐 | 个性化内容 |

### 6.2 隐私设置页面

```
┌─────────────────────────────────────────────────────────────────┐
│                    隐私设置                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  数据收集                                                        │
│  ├── 发送崩溃报告                                         开    │
│  │   帮助我们改进应用稳定性                                      │
│  │                                                              │
│  ├── 发送使用数据                                         开    │
│  │   匿名使用数据帮助改进产品                                    │
│  │                                                              │
│  └── 个性化推荐                                           开    │
│      基于阅读历史推荐内容                                        │
│                                                                  │
│  权限管理                                                        │
│  ├── 通知                                               已允许   │
│  ├── 相册                                               已允许   │
│  └── 麦克风                                             未请求   │
│                                                                  │
│  数据管理                                                        │
│  ├── [导出我的数据]                                             │
│  ├── [删除阅读历史]                                             │
│  └── [删除账户]                                                 │
│                                                                  │
│  法律信息                                                        │
│  ├── 隐私政策                                              >    │
│  └── 用户协议                                              >    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 7. 账户安全

### 7.1 安全设置

| 设置 | 说明 |
|------|------|
| 修改密码 | 更改登录密码 |
| 生物识别 | Face ID/Touch ID |
| 两步验证 | 双重认证 |
| 登录设备 | 管理登录设备 |

### 7.2 安全设置页面

```
┌─────────────────────────────────────────────────────────────────┐
│                    账户安全                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  登录安全                                                        │
│  ├── 修改密码                                              >    │
│  ├── Face ID 登录                                         开    │
│  └── 两步验证                                              >    │
│                                                                  │
│  登录设备                                                        │
│  ├── iPhone 15 Pro (当前)                                       │
│  │   最后活动: 刚刚                                              │
│  │                                                              │
│  ├── iPad Pro                                             >    │
│  │   最后活动: 2 小时前                                          │
│  │                                                              │
│  └── [退出所有其他设备]                                         │
│                                                                  │
│  登录历史                                                        │
│  └── 查看登录历史                                          >    │
│                                                                  │
│  账户安全                                                        │
│  ├── 绑定手机号                                    138****8888   │
│  ├── 绑定邮箱                                 user@example.com   │
│  └── 第三方账号                                                  │
│      ├── Apple                                          已绑定   │
│      └── 微信                                           未绑定   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 8. 订阅管理

### 8.1 订阅信息

| 信息 | 说明 |
|------|------|
| 当前方案 | 订阅计划 |
| 到期时间 | 订阅截止日 |
| 自动续订 | 续订状态 |
| 订阅历史 | 历史记录 |

### 8.2 订阅管理页面

```
┌─────────────────────────────────────────────────────────────────┐
│                    订阅管理                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  当前订阅                                                        │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  ⭐ 高级会员                                            │    │
│  │                                                          │    │
│  │  到期时间: 2026-01-15                                   │    │
│  │  自动续订: 已开启                                        │    │
│  │                                                          │    │
│  │  [管理订阅]                                              │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  会员权益                                                        │
│  ├── ✓ 无限 AI 查词                                             │
│  ├── ✓ 全部书籍                                                 │
│  ├── ✓ 云端同步                                                 │
│  ├── ✓ 多设备                                                   │
│  └── ✓ 专属客服                                                 │
│                                                                  │
│  AI 配额                                                        │
│  ├── 今日已用: 50 / 500                                        │
│  └── 重置时间: 明日 00:00                                       │
│                                                                  │
│  订阅记录                                                        │
│  └── 查看订阅历史                                          >    │
│                                                                  │
│  恢复购买                                                        │
│  └── [恢复购买]                                                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 9. 关于与帮助

### 9.1 关于页面

| 信息 | 说明 |
|------|------|
| 版本号 | App 版本 |
| 构建号 | Build 号 |
| 更新日志 | 版本更新 |
| 开源许可 | 第三方库 |

### 9.2 帮助与反馈

```
┌─────────────────────────────────────────────────────────────────┐
│                    帮助与反馈                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  帮助中心                                                        │
│  ├── 常见问题                                              >    │
│  ├── 使用教程                                              >    │
│  └── 新手引导                                              >    │
│                                                                  │
│  联系我们                                                        │
│  ├── 意见反馈                                              >    │
│  ├── 问题报告                                              >    │
│  └── 功能建议                                              >    │
│                                                                  │
│  反馈方式                                                        │
│  ├── 邮箱: support@readmigo.com                                │
│  └── 微信公众号: Readmigo                                      │
│                                                                  │
│  社区                                                            │
│  ├── 官方社区                                              >    │
│  └── 用户群                                                >    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 10. 数据存储

### 10.1 存储方式

| 数据 | 存储 |
|------|------|
| 用户设置 | UserDefaults |
| 安全数据 | Keychain |
| 阅读偏好 | UserDefaults |
| 同步设置 | iCloud KV |

### 10.2 @AppStorage 使用

| Key | 类型 | 默认值 |
|-----|------|--------|
| theme | String | "system" |
| fontSize | Int | 18 |
| autoSync | Bool | true |
| notifications | Bool | true |

---

## 11. 相关文档

| 文档 | 说明 |
|------|------|
| [auth.md](./auth.md) | 认证功能 |
| [../architecture.md](../architecture.md) | 架构设计 |
| [../state-management.md](../state-management.md) | 状态管理 |

---

*最后更新: 2025-12-31*

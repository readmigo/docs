# Backend ç¯å¢ƒé…ç½®è¯¦æƒ…

> å„ç¯å¢ƒè¯¦ç»†è®¾è®¡ã€é…ç½®è§„èŒƒã€å®¢æˆ·ç«¯åˆ‡æ¢

---

## 1. æ¨¡å—æ¦‚è¿°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç¯å¢ƒé…ç½®è¯¦æƒ…                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  æœ¬æ–‡æ¡£å†…å®¹                                                      â”‚
â”‚  â”œâ”€â”€ å„ç¯å¢ƒè¯¦ç»†é…ç½® (Local/Debugging/Staging/Production)        â”‚
â”‚  â”œâ”€â”€ é…ç½®æ–‡ä»¶ç»“æ„ä¸éªŒè¯                                          â”‚
â”‚  â””â”€â”€ å®¢æˆ·ç«¯ç¯å¢ƒåˆ‡æ¢æ–¹æ¡ˆ                                          â”‚
â”‚                                                                  â”‚
â”‚  ç›¸å…³æ–‡æ¡£                                                        â”‚
â”‚  â”œâ”€â”€ be-environment-overview.md (æ¦‚è¿°)                          â”‚
â”‚  â””â”€â”€ environment-operations/backend-environment-operations.md (è¿ç»´æ‰‹å†Œ) â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Local ç¯å¢ƒ (æœ¬åœ°å¼€å‘)

**ç›®æ ‡**: ä½æˆæœ¬ã€å¿«é€Ÿè¿­ä»£ã€å…¨æ ˆæœ¬åœ°åŒ–

### 2.1 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     LOCAL ENVIRONMENT                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Developer Machine                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚   Backend   â”‚  â”‚  Dashboard  â”‚  â”‚  iOS Client â”‚        â”‚  â”‚
â”‚  â”‚  â”‚  (NestJS)   â”‚  â”‚   (React)   â”‚  â”‚  (SwiftUI)  â”‚        â”‚  â”‚
â”‚  â”‚  â”‚  :3000      â”‚  â”‚   :5173     â”‚  â”‚  Simulator  â”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â”‚         â”‚                â”‚                â”‚                â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚                          â”‚                                 â”‚  â”‚
â”‚  â”‚                          â–¼                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              Docker Compose Services                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ PostgreSQL â”‚  â”‚   Redis    â”‚  â”‚   MinIO    â”‚     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   :5432    â”‚  â”‚   :6379    â”‚  â”‚   :9000    â”‚     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚ (R2 Mock)  â”‚     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  Remote Dependencies (Mocked/Optional)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  AI Services: Mock responses / Real API (optional)         â”‚  â”‚
â”‚  â”‚  Sentry: Disabled or Dev DSN                               â”‚  â”‚
â”‚  â”‚  Apple Auth: Sandbox / Skip validation                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 é…ç½®è§„èŒƒ

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `NODE_ENV` | development | å¼€å‘æ¨¡å¼ |
| `ENVIRONMENT` | local | ç¯å¢ƒæ ‡è¯† |
| `DATABASE_URL` | localhost:5432 | æœ¬åœ° Docker |
| `REDIS_URL` | localhost:6379 | æœ¬åœ° Docker |
| `AI_MOCK_ENABLED` | true/false | å¯é€‰ Mock |
| `LOG_LEVEL` | debug | è¯¦ç»†æ—¥å¿— |
| `SENTRY_ENABLED` | false | ç¦ç”¨ |

### 2.3 æ•°æ®ç®¡ç†ç­–ç•¥

| æ–¹æ¡ˆ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **DB Snapshot** | ä»å…¶ä»–ç¯å¢ƒå¯¼å…¥å¿«ç…§ | æµ‹è¯•çœŸå®åœºæ™¯ |
| **Empty DB** | ç©ºæ•°æ®åº“ + è¿ç§» | æµ‹è¯•åˆå§‹åŒ–æµç¨‹ |

---

## 3. Debugging ç¯å¢ƒ (åŠŸèƒ½è°ƒè¯•)

**ç›®æ ‡**: æä¾›å®Œæ•´çœŸå®æ•°æ®ï¼Œæ”¯æŒç‰¹å®šåŠŸèƒ½çš„æ·±åº¦è°ƒè¯•

### 3.1 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DEBUGGING ENVIRONMENT                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Purpose: åŠŸèƒ½è°ƒè¯•ã€é˜…è¯»å™¨æµ‹è¯•ã€è®¾ç½®éªŒè¯                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Cloud Infrastructure                    â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                   Fly.io (Debug)                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Backend   â”‚  â”‚   Workers   â”‚                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   1 replica â”‚  â”‚  (Optional) â”‚                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  debug-api.readmigo.app                             â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                          â”‚                                 â”‚  â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚         â–¼                â–¼                â–¼               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Neon DB  â”‚    â”‚  Upstash  â”‚    â”‚    R2     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  (Debug)  â”‚    â”‚  (Debug)  â”‚    â”‚  (Debug)  â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  Data Sync (Weekly/On-Demand)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Production â”€â”€(anonymized snapshot)â”€â”€> Debugging          â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  - User PII anonymized (email, name hashed)               â”‚  â”‚
â”‚  â”‚  - Books, authors, categories: complete copy              â”‚  â”‚
â”‚  â”‚  - Reading progress: preserved for testing                â”‚  â”‚
â”‚  â”‚  - AI cache: preserved for cost saving                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 é…ç½®è§„èŒƒ

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `NODE_ENV` | development | å¼€å‘æ¨¡å¼ |
| `ENVIRONMENT` | debugging | ç¯å¢ƒæ ‡è¯† |
| `DATABASE_URL` | debug-db.neon.tech | äº‘ç«¯ç‹¬ç«‹ |
| `REDIS_URL` | debug-redis.upstash.io | äº‘ç«¯ç‹¬ç«‹ |
| `AI_MOCK_ENABLED` | false | çœŸå® API |
| `LOG_LEVEL` | debug | è¯¦ç»†æ—¥å¿— |
| `SENTRY_ENABLED` | true | å¯ç”¨ç›‘æ§ |
| `DEBUG_MODE_ENABLED` | true | è°ƒè¯•ç‰¹æ€§ |

### 3.3 è°ƒè¯•ç‰¹æ€§

| ç«¯ç‚¹ | è¯´æ˜ |
|------|------|
| `GET /debug/context` | æŸ¥çœ‹è¯·æ±‚ä¸Šä¸‹æ–‡ |
| `POST /debug/impersonate/:userId` | æ¨¡æ‹Ÿç”¨æˆ· |
| `DELETE /debug/test-data` | æ¸…ç†æµ‹è¯•æ•°æ® |
| `POST /debug/reset-reading/:bookId` | é‡ç½®é˜…è¯»è¿›åº¦ |

---

## 4. Staging ç¯å¢ƒ (é¢„å‘å¸ƒ)

**ç›®æ ‡**: ç”Ÿäº§çº§å®Œæ•´éªŒè¯ï¼Œç¡®ä¿å‘å¸ƒè´¨é‡

### 4.1 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STAGING ENVIRONMENT                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Purpose: ä¸Šçº¿å‰å…¨é“¾è·¯éªŒè¯ã€å›å½’æµ‹è¯•ã€æ€§èƒ½éªŒè¯                      â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Cloud Infrastructure                     â”‚  â”‚
â”‚  â”‚              (Production-like Configuration)               â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                   Fly.io (Staging)                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Backend   â”‚  â”‚         Workers             â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  2 replicas â”‚  â”‚  author(1), book(1),        â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚             â”‚  â”‚  quote(1), batch(1)         â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  staging-api.readmigo.app                           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                          â”‚                                 â”‚  â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚         â–¼                â–¼                â–¼               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Neon DB  â”‚    â”‚  Upstash  â”‚    â”‚    R2     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ (Staging) â”‚    â”‚ (Staging) â”‚    â”‚ (Staging) â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  Deployment Pipeline                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  main branch â”€â”€â”€ Deploy â”€â”€> Staging â”€â”€â”€ Verify â”€â”€> Prod   â”‚  â”‚
â”‚  â”‚                     â”‚                      â”‚               â”‚  â”‚
â”‚  â”‚                     â–¼                      â–¼               â”‚  â”‚
â”‚  â”‚              Auto Deploy            Manual Approval        â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 é…ç½®è§„èŒƒ

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `NODE_ENV` | production | ç”Ÿäº§æ¨¡å¼ |
| `ENVIRONMENT` | staging | ç¯å¢ƒæ ‡è¯† |
| `DATABASE_URL` | staging-db.neon.tech | äº‘ç«¯ç‹¬ç«‹ |
| `DATABASE_POOL_SIZE` | 10 | è¿æ¥æ±  |
| `AI_MOCK_ENABLED` | false | çœŸå® API |
| `AI_RATE_LIMIT` | 100 | é™æµ |
| `LOG_LEVEL` | info | ä¿¡æ¯çº§åˆ« |
| `SENTRY_ENABLED` | true | å¯ç”¨ç›‘æ§ |
| `SENTRY_TRACES_SAMPLE_RATE` | 0.5 | é‡‡æ ·ç‡ |

### 4.3 éªŒè¯æ¸…å•

| ç±»åˆ« | æ£€æŸ¥é¡¹ |
|------|--------|
| **åŸºç¡€åŠŸèƒ½** | å¥åº·æ£€æŸ¥ã€ç”¨æˆ·ç™»å½•/æ³¨å†Œã€OAuth ç™»å½• |
| **æ ¸å¿ƒåŠŸèƒ½** | ä¹¦ç±åˆ—è¡¨ã€è¯¦æƒ…é¡µã€é˜…è¯»å™¨ã€è¿›åº¦åŒæ­¥ã€è¯æ±‡æœ¬ã€AI è§£é‡Š |
| **ç®¡ç†åå°** | Dashboard ç™»å½•ã€æ•°æ®ç®¡ç†ã€Feature Flag |
| **æ€§èƒ½æŒ‡æ ‡** | API P99 < 500msã€é”™è¯¯ç‡ < 0.1%ã€å†…å­˜æ­£å¸¸ |

---

## 5. Production ç¯å¢ƒ (ç”Ÿäº§)

**ç›®æ ‡**: æœåŠ¡ç¨³å®šã€æ•°æ®å®‰å…¨ã€ç”¨æˆ·ä½“éªŒä¼˜å…ˆ

### 5.1 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PRODUCTION ENVIRONMENT                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Purpose: æ­£å¼å¯¹å¤–æœåŠ¡ã€çœŸå®ç”¨æˆ·ã€æ•°æ®å®‰å…¨                          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Cloud Infrastructure                     â”‚  â”‚
â”‚  â”‚                 (High Availability Setup)                  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                   Fly.io (Production)                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                     Tokyo Region                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Backend   â”‚  â”‚         Workers             â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  3 replicas â”‚  â”‚  author(2), book(2),        â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Auto-scale â”‚  â”‚  quote(3), batch(1)         â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  api.readmigo.app                                   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                          â”‚                                 â”‚  â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚         â–¼                â–¼                â–¼               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Neon DB  â”‚    â”‚  Upstash  â”‚    â”‚    R2     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  (Prod)   â”‚    â”‚  (Prod)   â”‚    â”‚  (Prod)   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Primary  â”‚    â”‚  Cluster  â”‚    â”‚  Global   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  + Replicaâ”‚    â”‚           â”‚    â”‚  CDN      â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  Security & Monitoring                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Sentry  â”‚  â”‚ Fly.io   â”‚  â”‚ Uptime   â”‚  â”‚  Backup  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Errors  â”‚  â”‚ Metrics  â”‚  â”‚ Monitor  â”‚  â”‚  Daily   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  Data Protection                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  - Daily automated backups (30 days retention)            â”‚  â”‚
â”‚  â”‚  - Point-in-time recovery enabled                         â”‚  â”‚
â”‚  â”‚  - Encryption at rest and in transit                      â”‚  â”‚
â”‚  â”‚  - Access audit logging                                   â”‚  â”‚
â”‚  â”‚  - No direct database access (only via API)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 é…ç½®è§„èŒƒ

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `NODE_ENV` | production | ç”Ÿäº§æ¨¡å¼ |
| `ENVIRONMENT` | production | ç¯å¢ƒæ ‡è¯† |
| `DATABASE_URL` | prod-db.neon.tech | ä¸»å®ä¾‹ |
| `DATABASE_POOL_SIZE` | 20 | è¿æ¥æ±  |
| `REDIS_CLUSTER_MODE` | true | é›†ç¾¤æ¨¡å¼ |
| `AI_RATE_LIMIT` | 1000 | é™æµ |
| `AI_CACHE_TTL` | 86400 | ç¼“å­˜1å¤© |
| `LOG_LEVEL` | warn | è­¦å‘Šçº§åˆ« |
| `RATE_LIMIT_ENABLED` | true | å¯ç”¨é™æµ |
| `SENTRY_TRACES_SAMPLE_RATE` | 0.1 | ä½é‡‡æ · |

### 5.3 å®‰å…¨æªæ–½

| æªæ–½ | è¯´æ˜ |
|------|------|
| **ç¦ç”¨åŠŸèƒ½** | debug-endpoints, impersonation, test-data-cleanup, database-reset |
| **å®¡è®¡æ—¥å¿—** | user.delete, book.delete, subscription.modify, admin.access |
| **IP ç™½åå•** | Dashboard è®¿é—®é™åˆ¶ |
| **Rate Limiting** | API: 100/min, Auth: 10/5min, AI: 20/min |

---

## 6. é…ç½®ç®¡ç†

### 6.1 é…ç½®å±‚çº§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONFIGURATION HIERARCHY                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Priority (High â†’ Low):                                         â”‚
â”‚                                                                  â”‚
â”‚  1. Runtime Secrets (Fly Secrets / Env Vars)                   â”‚
â”‚     â””â”€â”€ JWT_SECRET, API_KEYS, DATABASE_URL                     â”‚
â”‚                                                                  â”‚
â”‚  2. Environment File (.env.{environment})                       â”‚
â”‚     â””â”€â”€ PORT, LOG_LEVEL, FEATURE_FLAGS                         â”‚
â”‚                                                                  â”‚
â”‚  3. Default Config (src/config/default.ts)                     â”‚
â”‚     â””â”€â”€ Fallback values, shared constants                       â”‚
â”‚                                                                  â”‚
â”‚  4. Hardcoded Values                                            â”‚
â”‚     â””â”€â”€ Compile-time constants                                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 é…ç½®æ–‡ä»¶ç»“æ„

```
apps/backend/
â”œâ”€â”€ .env                      # å½“å‰å¼€å‘è€…æœ¬åœ°é…ç½® (gitignore)
â”œâ”€â”€ .env.example              # é…ç½®æ¨¡æ¿
â”œâ”€â”€ .env.local.example        # Local ç¯å¢ƒæ¨¡æ¿
â”œâ”€â”€ .env.debugging.example    # Debugging ç¯å¢ƒæ¨¡æ¿
â”œâ”€â”€ .env.staging.example      # Staging ç¯å¢ƒæ¨¡æ¿
â”œâ”€â”€ .env.production.example   # Production ç¯å¢ƒæ¨¡æ¿ï¼ˆæ— æ•æ„Ÿå€¼ï¼‰
â””â”€â”€ src/
    â””â”€â”€ config/
        â”œâ”€â”€ index.ts          # é…ç½®å…¥å£
        â”œâ”€â”€ default.ts        # é»˜è®¤é…ç½®
        â”œâ”€â”€ local.ts          # Local ç‰¹å®šé…ç½®
        â”œâ”€â”€ debugging.ts      # Debugging ç‰¹å®šé…ç½®
        â”œâ”€â”€ staging.ts        # Staging ç‰¹å®šé…ç½®
        â”œâ”€â”€ production.ts     # Production ç‰¹å®šé…ç½®
        â””â”€â”€ validation.ts     # é…ç½®éªŒè¯ schema
```

---

## 7. å®¢æˆ·ç«¯ç¯å¢ƒåˆ‡æ¢

### 7.1 iOS å®¢æˆ·ç«¯

#### åˆ‡æ¢æ–¹å¼

| æ–¹å¼ | è¯´æ˜ | é™åˆ¶ |
|------|------|------|
| **æµ®åŠ¨å¾½ç« ** | å±å¹•å³ä¸Šè§’ç¯å¢ƒæ ‡è¯†ï¼Œç‚¹å‡»åˆ‡æ¢ | ä»… DEBUG æ„å»º |
| **è®¾ç½®é¡µ** | Settings â†’ Developer Options â†’ Environment | ä»… DEBUG æ„å»º |
| **æ‘‡ä¸€æ‘‡** | æ‘‡æ™ƒè®¾å¤‡æ‰“å¼€åˆ‡æ¢é¢æ¿ | ä»… DEBUG æ„å»º |

#### ç¯å¢ƒé…ç½®

| ç¯å¢ƒ | API URL | å¾½ç« é¢œè‰² | çŸ­å |
|------|---------|----------|------|
| Local | localhost:3000 | æ©™è‰² | DEV |
| Debugging | debug-api.readmigo.app | é’è‰² | DBG |
| Staging | staging-api.readmigo.app | ç´«è‰² | STG |
| Production | api.readmigo.app | ç»¿è‰² | PROD |

### 7.2 Dashboard

#### åˆ‡æ¢æ–¹å¼

| æ–¹å¼ | è¯´æ˜ |
|------|------|
| **AppBar æŒ‰é’®** | é¡¶éƒ¨å¯¼èˆªæ ç¯å¢ƒåˆ‡æ¢æŒ‰é’®ç»„ |
| **é”®ç›˜å¿«æ·é”®** | Ctrl/Cmd + Shift + 1/2/3/4 |

#### åˆ‡æ¢æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  Readmigo Admin          [Local] [Debug] [Staging] [Prod]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ åˆ‡æ¢åˆ° Production?                       â”‚
         â”‚ âš ï¸ ç”Ÿäº§ç¯å¢ƒ - è°¨æ…æ“ä½œ                   â”‚
         â”‚                                         â”‚
         â”‚           [å–æ¶ˆ]  [ç¡®è®¤]                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                    æ¸…é™¤ç¼“å­˜ â†’ é‡æ–°åŠ è½½
```

---

## 8. ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [be-environment-overview.md](be-environment-overview.md) | ç¯å¢ƒéš”ç¦»æ¦‚è¿° |
| [backend-environment-operations.md](./environment-operations/backend-environment-operations.md) | è¿ç»´æ“ä½œæ‰‹å†Œ |
| [QUICK-START.md](../../QUICK-START.md) | æœ¬åœ°å¼€å‘å¿«é€Ÿå¼€å§‹ |
| [fly-io.md](./services/fly-io.md) | Fly.io éƒ¨ç½²ä¸æ¶æ„ |

---

## 9. å®é™…åŸºç¡€è®¾æ–½é…ç½®

### 9.1 Neon PostgreSQL

| ç¯å¢ƒ | Branch | Endpoint | å­˜å‚¨ |
|------|--------|----------|------|
| **Debugging** | debugging | `ep-small-queen-a1du4xmc` | ~1.67 GB |
| **Staging** | staging | `ep-shy-cloud-a1depd3i` | ~95 MB |

**è¿æ¥å­—ç¬¦ä¸²æ ¼å¼:**
```
postgresql://neondb_owner:<password>@<endpoint>.ap-southeast-1.aws.neon.tech/neondb?sslmode=require
```

### 9.2 Cloudflare R2

| ç¯å¢ƒ | Bucket | Public URL |
|------|--------|------------|
| **Debugging** | `readmigo-debug` | `https://assets.readmigo.com` |
| **Staging** | `readmigo-staging` | `https://staging-assets.readmigo.com` |

**R2 Account ID:** `cbda5dcfa2fa6852a5d58673de8cd1e8`

---

*æœ€åæ›´æ–°: 2026-01-02*

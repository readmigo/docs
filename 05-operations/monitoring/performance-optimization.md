# å…¨çƒæ€§èƒ½ä¼˜åŒ–

### 16.0 å…¨çƒéƒ¨ç½²ç­–ç•¥æ¦‚è¿°

æœ¬èŠ‚è¯¦ç»†è¯´æ˜ Readmigo å¦‚ä½•æœåŠ¡å…¨çƒç”¨æˆ·ï¼ˆåŒ…æ‹¬ä¸­å›½å¤§é™†ç”¨æˆ·ï¼‰çš„éƒ¨ç½²æ¶æ„å’Œç­–ç•¥ã€‚

#### 16.0.1 å½“å‰éƒ¨ç½²ç°çŠ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å½“å‰æ¶æ„ (2024)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  éƒ¨ç½²é…ç½®ï¼š                                                              â”‚
â”‚  â”œâ”€â”€ å¹³å°ï¼šFly.io                                                       â”‚
â”‚  â”œâ”€â”€ åŒºåŸŸï¼šTokyo (NRT) - äºšå¤ªä¸»åŒºåŸŸ                                     â”‚
â”‚  â”œâ”€â”€ å®ä¾‹ï¼šshared-cpu-1x, 512MB RAM                                     â”‚
â”‚  â”œâ”€â”€ æ•°æ®åº“ï¼šPostgreSQL (Fly.io æ‰˜ç®¡)                                   â”‚
â”‚  â”œâ”€â”€ ç¼“å­˜ï¼šRedis (Fly.io æ‰˜ç®¡)                                          â”‚
â”‚  â””â”€â”€ å­˜å‚¨ï¼šCloudflare R2 (S3 å…¼å®¹)                                      â”‚
â”‚                                                                         â”‚
â”‚  ç”¨æˆ·å»¶è¿Ÿä¼°ç®—ï¼š                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  åœ°åŒº              â”‚  å»¶è¿Ÿ (RTT)    â”‚  ä½“éªŒè¯„çº§                  â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚  æ—¥æœ¬/éŸ©å›½/å°æ¹¾    â”‚  < 50ms       â”‚  â­â­â­â­â­ ä¼˜ç§€              â”‚    â”‚
â”‚  â”‚  ä¸œå—äºš            â”‚  50-100ms     â”‚  â­â­â­â­ è‰¯å¥½                â”‚    â”‚
â”‚  â”‚  ä¸­å›½å¤§é™†          â”‚  100-200ms    â”‚  â­â­â­ å¯ç”¨ (å¯èƒ½ä¸ç¨³å®š)    â”‚    â”‚
â”‚  â”‚  ç¾å›½è¥¿æµ·å²¸        â”‚  100-120ms    â”‚  â­â­â­â­ è‰¯å¥½                â”‚    â”‚
â”‚  â”‚  ç¾å›½ä¸œæµ·å²¸        â”‚  150-180ms    â”‚  â­â­â­ å¯æ¥å—               â”‚    â”‚
â”‚  â”‚  æ¬§æ´²              â”‚  200-280ms    â”‚  â­â­ è¾ƒæ…¢                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”‚  è¯„ä¼°ï¼šå½“å‰æ¶æ„é€‚åˆäºšå¤ªç”¨æˆ·ï¼Œä½†å¯¹æ¬§ç¾ç”¨æˆ·å»¶è¿Ÿè¾ƒé«˜                        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 16.0.2 å…¨çƒå¤šåŒºåŸŸéƒ¨ç½²æ–¹æ¡ˆ

**æ¨èæ¶æ„ï¼šPhase 1 - Cloudflare + Fly.io å¤šåŒºåŸŸ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Phase 1: å…¨çƒå¤šåŒºåŸŸæ¶æ„                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚                              å…¨çƒç”¨æˆ·                                    â”‚
â”‚     ğŸ‡ºğŸ‡¸ ç¾å›½    ğŸ‡ªğŸ‡º æ¬§æ´²    ğŸ‡¯ğŸ‡µ äºšå¤ª    ğŸ‡¨ğŸ‡³ ä¸­å›½    ğŸ‡§ğŸ‡· å—ç¾              â”‚
â”‚        â”‚          â”‚          â”‚          â”‚          â”‚                   â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                        â”‚                                                â”‚
â”‚                        â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 Cloudflare Global CDN                            â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  â€¢ 300+ å…¨çƒ PoP èŠ‚ç‚¹                                            â”‚   â”‚
â”‚  â”‚  â€¢ é™æ€èµ„æºç¼“å­˜ (EPUB, å°é¢å›¾ç‰‡, å­—ä½“)                           â”‚   â”‚
â”‚  â”‚  â€¢ DDoS é˜²æŠ¤ + WAF                                               â”‚   â”‚
â”‚  â”‚  â€¢ è‡ªåŠ¨ SSL è¯ä¹¦                                                 â”‚   â”‚
â”‚  â”‚  â€¢ æ™ºèƒ½è·¯ç”± (Argo Smart Routing - å¯é€‰)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                          â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚      â”‚                       â”‚                       â”‚                 â”‚
â”‚      â–¼                       â–¼                       â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Fly.io   â”‚          â”‚ Fly.io   â”‚          â”‚ Fly.io   â”‚              â”‚
â”‚  â”‚ SJC      â”‚          â”‚ NRT      â”‚          â”‚ AMS      â”‚              â”‚
â”‚  â”‚ (ç¾è¥¿)   â”‚          â”‚ (ä¸œäº¬)   â”‚          â”‚ (æ¬§æ´²)   â”‚              â”‚
â”‚  â”‚          â”‚          â”‚ [ä¸»åŒºåŸŸ] â”‚          â”‚          â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚
â”‚       â”‚                     â”‚                     â”‚                    â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                             â”‚                                          â”‚
â”‚                             â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      æ•°æ®å±‚ (é›†ä¸­å¼)                             â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ PostgreSQL   â”‚    â”‚ Redis        â”‚    â”‚ Cloudflare R2    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ (Tokyo)      â”‚    â”‚ (Tokyo)      â”‚    â”‚ (å…¨çƒè¾¹ç¼˜ç¼“å­˜)   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚              â”‚    â”‚              â”‚    â”‚                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ä¸»æ•°æ®åº“   â”‚    â”‚ â€¢ Session    â”‚    â”‚ â€¢ EPUB æ–‡ä»¶      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ è¯»å‰¯æœ¬å¯é€‰ â”‚    â”‚ â€¢ AI ç¼“å­˜    â”‚    â”‚ â€¢ å°é¢å›¾ç‰‡       â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŒ–åå»¶è¿Ÿï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœ°åŒº              â”‚  ä¼˜åŒ–åå»¶è¿Ÿ    â”‚  æ”¹å–„                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  æ—¥æœ¬/éŸ©å›½/å°æ¹¾    â”‚  < 50ms       â”‚  ä¸å˜                   â”‚
â”‚  ä¸œå—äºš            â”‚  50-80ms      â”‚  æå‡ 20%               â”‚
â”‚  ä¸­å›½å¤§é™†          â”‚  80-150ms     â”‚  æå‡ 25% + æ›´ç¨³å®š      â”‚
â”‚  ç¾å›½              â”‚  < 50ms       â”‚  æå‡ 60-70%            â”‚
â”‚  æ¬§æ´²              â”‚  < 50ms       â”‚  æå‡ 80%               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 16.0.3 ä¸­å›½å¤§é™†ç”¨æˆ·æ”¯æŒç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ä¸­å›½å¤§é™†ç”¨æˆ·æ”¯æŒæ–¹æ¡ˆ                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  æ–¹æ¡ˆå¯¹æ¯”ï¼š                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ–¹æ¡ˆ          â”‚ å¤æ‚åº¦ â”‚ æˆæœ¬    â”‚ å»¶è¿Ÿ    â”‚ åˆè§„æ€§            â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚  A. ä¸åšç‰¹æ®Šå¤„ç†â”‚  ä½   â”‚  $     â”‚ ä¸­ç­‰    â”‚ æ— éœ€å¤‡æ¡ˆ           â”‚   â”‚
â”‚  â”‚  B. Cloudflare â”‚  ä½   â”‚  $     â”‚ è¾ƒå¥½    â”‚ æ— éœ€å¤‡æ¡ˆ           â”‚   â”‚
â”‚  â”‚  C. é¦™æ¸¯èŠ‚ç‚¹   â”‚  ä¸­   â”‚  $$    â”‚ å¥½      â”‚ æ— éœ€å¤‡æ¡ˆ           â”‚   â”‚
â”‚  â”‚  D. å›½å†…ç‹¬ç«‹éƒ¨ç½²â”‚  é«˜   â”‚  $$$   â”‚ æœ€ä½³    â”‚ éœ€ ICP å¤‡æ¡ˆ        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  æ¨èï¼šæ–¹æ¡ˆ B/C (Phase 1)ï¼Œå¾…å¸‚åœºéªŒè¯åè€ƒè™‘æ–¹æ¡ˆ D                       â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                         â”‚
â”‚  æ–¹æ¡ˆ B è¯¦ç»†è¯´æ˜ - Cloudflare ä¼˜åŒ–ï¼š                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  1. ä½¿ç”¨ Cloudflare çš„ä¸­å›½ç½‘ç»œåˆä½œä¼™ä¼´èŠ‚ç‚¹                              â”‚
â”‚  2. é™æ€èµ„æºé€šè¿‡ Cloudflare R2 å…¨çƒåˆ†å‘                                 â”‚
â”‚  3. API è¯·æ±‚é€šè¿‡ Cloudflare æ™ºèƒ½è·¯ç”±                                    â”‚
â”‚  4. æ— éœ€ ICP å¤‡æ¡ˆï¼ˆä½¿ç”¨æµ·å¤–åŸŸåï¼‰                                       â”‚
â”‚                                                                         â”‚
â”‚  æ–¹æ¡ˆ C è¯¦ç»†è¯´æ˜ - é¦™æ¸¯èŠ‚ç‚¹ï¼š                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚  1. åœ¨ Fly.io Hong Kong (HKG) å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹                              â”‚
â”‚  2. ä¸­å›½ç”¨æˆ·è‡ªåŠ¨è·¯ç”±åˆ°é¦™æ¸¯                                              â”‚
â”‚  3. å»¶è¿Ÿå¯é™è‡³ 30-80ms                                                  â”‚
â”‚  4. æ— éœ€ ICP å¤‡æ¡ˆ                                                       â”‚
â”‚                                                                         â”‚
â”‚  æ–¹æ¡ˆ D è¯¦ç»†è¯´æ˜ - å›½å†…ç‹¬ç«‹éƒ¨ç½² (æœªæ¥è€ƒè™‘)ï¼š                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚   æµ·å¤–ç”¨æˆ·                           ä¸­å›½å¤§é™†ç”¨æˆ·                â”‚   â”‚
â”‚  â”‚   readmigo.app                       readmigo.cn                â”‚   â”‚
â”‚  â”‚       â”‚                                   â”‚                      â”‚   â”‚
â”‚  â”‚       â–¼                                   â–¼                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚ Cloudflare   â”‚                  â”‚ é˜¿é‡Œäº‘ CDN   â”‚             â”‚   â”‚
â”‚  â”‚  â”‚ + Fly.io     â”‚                  â”‚ + ECS        â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚         â”‚                                 â”‚                      â”‚   â”‚
â”‚  â”‚         â–¼                                 â–¼                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚ PostgreSQL   â”‚                  â”‚ é˜¿é‡Œäº‘ RDS   â”‚             â”‚   â”‚
â”‚  â”‚  â”‚ (æµ·å¤–)       â”‚                  â”‚ (å›½å†…)       â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  æ³¨æ„ï¼š                                                          â”‚   â”‚
â”‚  â”‚  â€¢ éœ€è¦ ICP å¤‡æ¡ˆï¼ˆä¸ªäººæˆ–ä¼ä¸šï¼‰                                   â”‚   â”‚
â”‚  â”‚  â€¢ éœ€è¦å›½å†…å…¬å¸ä¸»ä½“                                              â”‚   â”‚
â”‚  â”‚  â€¢ æ•°æ®éœ€è¦åˆ†ç¦»å­˜å‚¨                                              â”‚   â”‚
â”‚  â”‚  â€¢ æ•™è‚²ç±» App å¯èƒ½éœ€è¦é¢å¤–èµ„è´¨                                   â”‚   â”‚
â”‚  â”‚  â€¢ æˆæœ¬è¾ƒé«˜ï¼Œå»ºè®®æœˆæ”¶å…¥ > $5000 åè€ƒè™‘                           â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 16.0.4 æ¸è¿›å¼éƒ¨ç½²è·¯çº¿å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        éƒ¨ç½²æ¼”è¿›è·¯çº¿å›¾                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Phase 0: MVP (å½“å‰)                                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                    â”‚
â”‚  â€¢ Fly.io Tokyo å•åŒºåŸŸ                                                  â”‚
â”‚  â€¢ Cloudflare R2 å­˜å‚¨                                                   â”‚
â”‚  â€¢ ç›®æ ‡ç”¨æˆ·ï¼šäºšå¤ªåœ°åŒº                                                   â”‚
â”‚  â€¢ æˆæœ¬ï¼š~$20-50/æœˆ                                                     â”‚
â”‚                                                                         â”‚
â”‚          â”‚                                                              â”‚
â”‚          â–¼                                                              â”‚
â”‚                                                                         â”‚
â”‚  Phase 1: å…¨çƒåŒ–åŸºç¡€ (ç”¨æˆ· > 1000 DAU)                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚  â€¢ æ·»åŠ  Cloudflare ä»£ç†å±‚                                               â”‚
â”‚  â€¢ Fly.io å¤šåŒºåŸŸï¼šTokyo + San Jose + Amsterdam                         â”‚
â”‚  â€¢ é¦™æ¸¯èŠ‚ç‚¹ä¼˜åŒ–ä¸­å›½è®¿é—®                                                 â”‚
â”‚  â€¢ æˆæœ¬ï¼š~$100-200/æœˆ                                                   â”‚
â”‚                                                                         â”‚
â”‚          â”‚                                                              â”‚
â”‚          â–¼                                                              â”‚
â”‚                                                                         â”‚
â”‚  Phase 2: æ€§èƒ½ä¼˜åŒ– (ç”¨æˆ· > 5000 DAU)                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚  â€¢ PostgreSQL è¯»å‰¯æœ¬                                                    â”‚
â”‚  â€¢ Redis å¤šåŒºåŸŸé›†ç¾¤                                                     â”‚
â”‚  â€¢ Cloudflare Argo æ™ºèƒ½è·¯ç”±                                             â”‚
â”‚  â€¢ æˆæœ¬ï¼š~$300-500/æœˆ                                                   â”‚
â”‚                                                                         â”‚
â”‚          â”‚                                                              â”‚
â”‚          â–¼                                                              â”‚
â”‚                                                                         â”‚
â”‚  Phase 3: ä¸­å›½æœ¬åœ°åŒ– (ä¸­å›½ç”¨æˆ· > 30% ä¸”æœ‰ç¨³å®šæ”¶å…¥)                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚  â€¢ æ³¨å†Œå›½å†…å…¬å¸ / å¯»æ‰¾ä»£ç†                                              â”‚
â”‚  â€¢ ICP å¤‡æ¡ˆ                                                             â”‚
â”‚  â€¢ é˜¿é‡Œäº‘/è…¾è®¯äº‘éƒ¨ç½²                                                    â”‚
â”‚  â€¢ ç‹¬ç«‹åŸŸå readmigo.cn                                                 â”‚
â”‚  â€¢ æˆæœ¬ï¼š~$500-1000/æœˆ + åˆè§„æˆæœ¬                                       â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 16.0.5 Fly.io å¤šåŒºåŸŸé…ç½®

```toml
# fly.toml - å¤šåŒºåŸŸé…ç½®ç¤ºä¾‹

app = "readmigo-api"
primary_region = "nrt"  # Tokyo ä½œä¸ºä¸»åŒºåŸŸ

[build]
  dockerfile = "Dockerfile"

[http_service]
  internal_port = 3000
  force_https = true
  auto_stop_machines = true
  auto_start_machines = true
  min_machines_running = 1

  # å¤šåŒºåŸŸéƒ¨ç½²
  [[http_service.regions]]
  region = "nrt"   # Tokyo - ä¸»åŒºåŸŸï¼Œé è¿‘æ•°æ®åº“
  [[http_service.regions]]
  region = "sjc"   # San Jose - ç¾è¥¿
  [[http_service.regions]]
  region = "ams"   # Amsterdam - æ¬§æ´²
  [[http_service.regions]]
  region = "hkg"   # Hong Kong - ä¸­å›½ç”¨æˆ·ä¼˜åŒ–

[http_service.concurrency]
  type = "connections"
  hard_limit = 250
  soft_limit = 200

[[vm]]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 512
```

```bash
# éƒ¨ç½²åˆ°å¤šåŒºåŸŸ
fly scale count 1 --region nrt   # Tokyo
fly scale count 1 --region sjc   # San Jose
fly scale count 1 --region ams   # Amsterdam
fly scale count 1 --region hkg   # Hong Kong (å¯é€‰)
```

### 16.1 å…¨çƒç½‘ç»œæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Global Network Architecture                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚                           å…¨çƒç”¨æˆ·                                       â”‚
â”‚       ğŸ‡ºğŸ‡¸          ğŸ‡ªğŸ‡º          ğŸ‡¯ğŸ‡µ          ğŸ‡§ğŸ‡·          ğŸ‡®ğŸ‡³              â”‚
â”‚        â”‚            â”‚            â”‚            â”‚            â”‚            â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                           â”‚                                             â”‚
â”‚                           â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Cloudflare Global Network                     â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚  â”‚  åŒ—ç¾    â”‚ â”‚  æ¬§æ´²    â”‚ â”‚  äºšå¤ª    â”‚ â”‚ å—ç¾     â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  PoP    â”‚ â”‚  PoP    â”‚ â”‚  PoP    â”‚ â”‚  PoP    â”‚           â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â”‚       â”‚            â”‚            â”‚            â”‚                  â”‚    â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚    â”‚
â”‚  â”‚                          â”‚                                      â”‚    â”‚
â”‚  â”‚  åŠŸèƒ½ï¼š                                                         â”‚    â”‚
â”‚  â”‚  â€¢ DDoSé˜²æŠ¤              â€¢ è¾¹ç¼˜ç¼“å­˜                             â”‚    â”‚
â”‚  â”‚  â€¢ SSL/TLSç»ˆæ­¢           â€¢ æ™ºèƒ½è·¯ç”±                             â”‚    â”‚
â”‚  â”‚  â€¢ WAFé˜²ç«å¢™             â€¢ è´Ÿè½½å‡è¡¡                             â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                           â”‚
â”‚                             â–¼                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      Origin Servers                              â”‚    â”‚
â”‚  â”‚                   Fly.io å¤šåŒºåŸŸéƒ¨ç½²                              â”‚    â”‚
â”‚  â”‚                   (NRT / SJC / AMS / HKG)                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 16.2 CDNç¼“å­˜ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CDN Caching Strategy                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ç¼“å­˜å±‚çº§                                                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•                                                              â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  èµ„æºç±»å‹          ç¼“å­˜æ—¶é—´      ç¼“å­˜ä½ç½®      æ›´æ–°ç­–ç•¥          â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚    â”‚
â”‚  â”‚  EPUBæ–‡ä»¶          7å¤©          CDNè¾¹ç¼˜       ç‰ˆæœ¬åŒ–URL         â”‚    â”‚
â”‚  â”‚  å°é¢å›¾ç‰‡          30å¤©         CDNè¾¹ç¼˜       ç‰ˆæœ¬åŒ–URL         â”‚    â”‚
â”‚  â”‚  å°é¢ç¼©ç•¥å›¾        30å¤©         CDNè¾¹ç¼˜       ç‰ˆæœ¬åŒ–URL         â”‚    â”‚
â”‚  â”‚  å­—ä½“æ–‡ä»¶          1å¹´          CDNè¾¹ç¼˜       æ°¸ä¹…ç¼“å­˜          â”‚    â”‚
â”‚  â”‚  é™æ€JS/CSS        1å¹´          CDNè¾¹ç¼˜       Hashå‘½å          â”‚    â”‚
â”‚  â”‚  ä¹¦ç±å…ƒæ•°æ®        1å°æ—¶        CDNè¾¹ç¼˜       stale-while-rev.  â”‚    â”‚
â”‚  â”‚  ç”¨æˆ·æ•°æ®          ä¸ç¼“å­˜       -             å®æ—¶              â”‚    â”‚
â”‚  â”‚  AIå“åº”            7å¤©          Redis         Hash Key          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”‚  Cache-Control é…ç½®                                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                     â”‚
â”‚                                                                         â”‚
â”‚  # EPUBæ–‡ä»¶                                                             â”‚
â”‚  Cache-Control: public, max-age=604800, stale-while-revalidate=86400   â”‚
â”‚                                                                         â”‚
â”‚  # å°é¢å›¾ç‰‡                                                             â”‚
â”‚  Cache-Control: public, max-age=2592000, immutable                      â”‚
â”‚                                                                         â”‚
â”‚  # APIå“åº” (ä¹¦ç±åˆ—è¡¨)                                                   â”‚
â”‚  Cache-Control: public, max-age=300, stale-while-revalidate=600        â”‚
â”‚                                                                         â”‚
â”‚  # APIå“åº” (ç”¨æˆ·æ•°æ®)                                                   â”‚
â”‚  Cache-Control: private, no-cache                                       â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 16.3 APIå“åº”ä¼˜åŒ–

```typescript
// åç«¯å“åº”ä¼˜åŒ–ç­–ç•¥

/**
 * å“åº”å‹ç¼©é…ç½®
 */
const compressionConfig = {
  // Brotliå‹ç¼© (ä¼˜å…ˆ)
  br: {
    enabled: true,
    level: 4,           // å¹³è¡¡å‹ç¼©ç‡å’ŒCPU
    minSize: 1024,      // æœ€å°å‹ç¼©å¤§å°
  },

  // Gzipå‹ç¼© (å…¼å®¹)
  gzip: {
    enabled: true,
    level: 6,
    minSize: 1024,
  }
};

/**
 * åˆ†é¡µå’Œå­—æ®µè¿‡æ»¤
 */
interface BookListRequest {
  page?: number;
  limit?: number;           // é»˜è®¤20ï¼Œæœ€å¤§100
  fields?: string[];        // æŒ‡å®šè¿”å›å­—æ®µ
  include?: string[];       // å…³è”æ•°æ®
}

// ç²¾ç®€å“åº”ç¤ºä¾‹
const bookListResponse = {
  // åªè¿”å›å¿…è¦å­—æ®µ
  books: [
    {
      id: "uuid",
      title: "Pride and Prejudice",
      author: "Jane Austen",
      coverUrl: "https://cdn.../cover_thumb.jpg",  // ç¼©ç•¥å›¾
      difficulty: 2.5,
      wordCount: 122000,
    }
  ],
  meta: {
    page: 1,
    limit: 20,
    total: 700,
    hasMore: true,
  }
};

/**
 * æ¡ä»¶è¯·æ±‚æ”¯æŒ
 */
// ETag æ”¯æŒ
app.use((req, res, next) => {
  res.set('ETag', generateETag(responseBody));

  if (req.headers['if-none-match'] === res.get('ETag')) {
    return res.status(304).end();
  }

  next();
});

// Last-Modified æ”¯æŒ
app.use((req, res, next) => {
  res.set('Last-Modified', resource.updatedAt.toUTCString());

  const ifModifiedSince = req.headers['if-modified-since'];
  if (ifModifiedSince && new Date(ifModifiedSince) >= resource.updatedAt) {
    return res.status(304).end();
  }

  next();
});
```

### 16.4 å®¢æˆ·ç«¯æ€§èƒ½ä¼˜åŒ–

```swift
// Sources/Reader/Performance/PerformanceOptimizations.swift

/// æ€§èƒ½ä¼˜åŒ–é…ç½®
struct PerformanceConfig {

    // MARK: - å›¾ç‰‡åŠ è½½ä¼˜åŒ–

    struct ImageLoading {
        /// å°é¢å›¾ç‰‡è´¨é‡
        static let coverQuality: CGFloat = 0.8

        /// ç¼©ç•¥å›¾å°ºå¯¸
        static let thumbnailSize = CGSize(width: 150, height: 225)

        /// å†…å­˜ç¼“å­˜å¤§å°
        static let memoryCacheSize = 50 * 1024 * 1024  // 50MB

        /// ç£ç›˜ç¼“å­˜å¤§å°
        static let diskCacheSize = 200 * 1024 * 1024   // 200MB

        /// é¢„åŠ è½½æ•°é‡ (ä¹¦æ¶æ˜¾ç¤º)
        static let prefetchCount = 10
    }

    // MARK: - EPUBé¢„åŠ è½½

    struct EPUBPreloading {
        /// é¢„åŠ è½½ç« èŠ‚æ•°
        static let preloadChapters = 2

        /// é¢„æ¸²æŸ“é¡µæ•°
        static let prerenderPages = 3

        /// å†…å­˜ä¸­ä¿ç•™çš„ç« èŠ‚æ•°
        static let cachedChaptersInMemory = 5
    }

    // MARK: - ç½‘ç»œè¯·æ±‚

    struct Networking {
        /// è¯·æ±‚è¶…æ—¶æ—¶é—´
        static let timeout: TimeInterval = 30

        /// æœ€å¤§å¹¶å‘ä¸‹è½½æ•°
        static let maxConcurrentDownloads = 3

        /// é‡è¯•æ¬¡æ•°
        static let retryCount = 3

        /// é‡è¯•å»¶è¿Ÿ (æŒ‡æ•°é€€é¿)
        static func retryDelay(attempt: Int) -> TimeInterval {
            pow(2.0, Double(attempt))
        }
    }
}

/// é¢„åŠ è½½ç®¡ç†å™¨
final class PreloadManager {

    private let imageCache: ImageCache
    private let epubCache: EPUBCache

    /// é¢„åŠ è½½ä¹¦æ¶å°é¢
    func preloadCovers(for books: [Book]) {
        let urls = books.prefix(PerformanceConfig.ImageLoading.prefetchCount)
            .compactMap { URL(string: $0.coverUrl) }

        imageCache.prefetch(urls: urls)
    }

    /// é¢„åŠ è½½ç« èŠ‚å†…å®¹
    func preloadChapters(book: Book, currentChapter: Int) {
        let start = max(0, currentChapter - 1)
        let end = min(book.chapters.count, currentChapter + PerformanceConfig.EPUBPreloading.preloadChapters + 1)

        for i in start..<end where i != currentChapter {
            Task {
                await epubCache.preloadChapter(book: book, index: i)
            }
        }
    }
}

/// å»¶è¿ŸåŠ è½½ç®¡ç†
final class LazyLoadManager {

    /// ç« èŠ‚å†…å®¹å»¶è¿ŸåŠ è½½
    func loadChapterContent(_ chapter: Chapter) async -> ChapterContent {
        // æ˜¾ç¤ºéª¨æ¶å±
        await showSkeleton()

        // åŠ è½½å†…å®¹
        let content = await epubService.loadChapter(chapter)

        // å»¶è¿ŸåŠ è½½å›¾ç‰‡
        let contentWithLazyImages = injectLazyImageLoading(content)

        return contentWithLazyImages
    }

    /// æ³¨å…¥æ‡’åŠ è½½å›¾ç‰‡
    private func injectLazyImageLoading(_ html: String) -> String {
        // å°† <img src="..."> æ›¿æ¢ä¸º <img data-src="..." class="lazy">
        // ä½¿ç”¨ Intersection Observer åœ¨å›¾ç‰‡è¿›å…¥è§†å£æ—¶åŠ è½½
        let script = """
        <script>
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.classList.remove('lazy');
                    observer.unobserve(img);
                }
            });
        });
        document.querySelectorAll('img.lazy').forEach(img => observer.observe(img));
        </script>
        """

        var modifiedHTML = html.replacingOccurrences(
            of: #"<img\s+src="([^"]+)""#,
            with: #"<img data-src="$1" class="lazy" src="placeholder.png""#,
            options: .regularExpression
        )

        modifiedHTML += script
        return modifiedHTML
    }
}
```

### 16.5 ç¦»çº¿æ”¯æŒä¸åŒæ­¥

```swift
// Sources/Reader/Offline/OfflineManager.swift

/// ç¦»çº¿ç®¡ç†å™¨
final class OfflineManager {

    // MARK: - Types

    struct DownloadProgress {
        let bookId: String
        let progress: Double
        let status: DownloadStatus
    }

    enum DownloadStatus {
        case pending
        case downloading
        case completed
        case failed(Error)
    }

    // MARK: - Properties

    private let fileManager = FileManager.default
    private let downloadQueue = OperationQueue()
    private var activeDownloads: [String: URLSessionDownloadTask] = [:]

    // MARK: - Download Management

    /// ä¸‹è½½ä¹¦ç±ä¾›ç¦»çº¿é˜…è¯»
    func downloadBook(_ book: Book) async throws {
        // 1. ä¸‹è½½EPUBæ–‡ä»¶
        let epubURL = try await downloadFile(
            from: book.epubUrl,
            to: offlineDirectory.appendingPathComponent("\(book.id).epub")
        )

        // 2. ä¸‹è½½å°é¢
        if let coverUrl = book.coverUrl {
            _ = try? await downloadFile(
                from: coverUrl,
                to: offlineDirectory.appendingPathComponent("\(book.id)_cover.jpg")
            )
        }

        // 3. ç¼“å­˜å…ƒæ•°æ®
        let metadata = OfflineBookMetadata(
            book: book,
            downloadedAt: Date(),
            epubPath: epubURL.path,
            fileSize: try fileManager.attributesOfItem(atPath: epubURL.path)[.size] as? Int64 ?? 0
        )

        try saveMetadata(metadata)

        // 4. é¢„å¤„ç†AIæ•°æ® (å¯é€‰)
        await preloadAIData(for: book)
    }

    /// æ£€æŸ¥ä¹¦ç±æ˜¯å¦å·²ä¸‹è½½
    func isBookDownloaded(_ bookId: String) -> Bool {
        let epubPath = offlineDirectory.appendingPathComponent("\(bookId).epub")
        return fileManager.fileExists(atPath: epubPath.path)
    }

    /// è·å–å·²ä¸‹è½½ä¹¦ç±åˆ—è¡¨
    func getDownloadedBooks() -> [OfflineBookMetadata] {
        // ä»æœ¬åœ°æ•°æ®åº“è¯»å–
        return localDB.getOfflineBooks()
    }

    /// åˆ é™¤ç¦»çº¿ä¹¦ç±
    func deleteOfflineBook(_ bookId: String) throws {
        let epubPath = offlineDirectory.appendingPathComponent("\(bookId).epub")
        let coverPath = offlineDirectory.appendingPathComponent("\(bookId)_cover.jpg")

        try? fileManager.removeItem(at: epubPath)
        try? fileManager.removeItem(at: coverPath)

        localDB.deleteOfflineBook(bookId)
    }

    /// è®¡ç®—ç¦»çº¿å­˜å‚¨å ç”¨
    func calculateStorageUsage() -> Int64 {
        var totalSize: Int64 = 0

        if let enumerator = fileManager.enumerator(at: offlineDirectory, includingPropertiesForKeys: [.fileSizeKey]) {
            for case let fileURL as URL in enumerator {
                if let fileSize = try? fileURL.resourceValues(forKeys: [.fileSizeKey]).fileSize {
                    totalSize += Int64(fileSize)
                }
            }
        }

        return totalSize
    }

    // MARK: - Offline AI Data

    /// é¢„åŠ è½½AIæ•°æ®ä¾›ç¦»çº¿ä½¿ç”¨
    private func preloadAIData(for book: Book) async {
        // é¢„åŠ è½½å¸¸è§è¯æ±‡çš„è§£é‡Š
        let vocabulary = await fetchBookVocabulary(book.id)

        for word in vocabulary.prefix(100) {  // å‰100ä¸ªé«˜é¢‘è¯
            let cacheKey = "word_explain_\(word.word)"
            if !aiCache.has(cacheKey) {
                if let explanation = try? await aiService.explainWord(word.word, context: word.contexts.first ?? "") {
                    aiCache.set(cacheKey, value: explanation)
                }
            }
        }

        // é¢„åŠ è½½ç« èŠ‚æ‘˜è¦
        for chapter in book.chapters {
            let cacheKey = "chapter_summary_\(book.id)_\(chapter.number)"
            if !aiCache.has(cacheKey) {
                if let summary = try? await aiService.summarizeChapter(book.id, chapter.number) {
                    aiCache.set(cacheKey, value: summary)
                }
            }
        }
    }
}
```

### 16.6 ç½‘ç»œçŠ¶æ€é€‚é…

```swift
// Sources/Reader/Network/NetworkAdaptiveManager.swift

import Network

/// ç½‘ç»œè‡ªé€‚åº”ç®¡ç†å™¨
final class NetworkAdaptiveManager {

    // MARK: - Types

    enum NetworkQuality {
        case excellent      // WiFi / 5G
        case good          // 4G
        case moderate      // 3G
        case poor          // 2G / å¼±ä¿¡å·
        case offline
    }

    struct AdaptiveConfig {
        let imageQuality: CGFloat
        let preloadEnabled: Bool
        let aiEnabled: Bool
        let syncEnabled: Bool
    }

    // MARK: - Properties

    private let monitor = NWPathMonitor()
    private let queue = DispatchQueue(label: "network.monitor")

    @Published private(set) var currentQuality: NetworkQuality = .excellent
    @Published private(set) var isConnected: Bool = true

    // MARK: - Initialization

    init() {
        startMonitoring()
    }

    // MARK: - Monitoring

    private func startMonitoring() {
        monitor.pathUpdateHandler = { [weak self] path in
            self?.handlePathUpdate(path)
        }
        monitor.start(queue: queue)
    }

    private func handlePathUpdate(_ path: NWPath) {
        DispatchQueue.main.async {
            self.isConnected = path.status == .satisfied

            if path.status == .satisfied {
                if path.usesInterfaceType(.wifi) {
                    self.currentQuality = .excellent
                } else if path.usesInterfaceType(.cellular) {
                    // æ ¹æ®ä¿¡å·ä¼°ç®—è´¨é‡
                    if path.isExpensive {
                        self.currentQuality = .moderate
                    } else {
                        self.currentQuality = .good
                    }
                }
            } else {
                self.currentQuality = .offline
            }
        }
    }

    // MARK: - Adaptive Configuration

    func getAdaptiveConfig() -> AdaptiveConfig {
        switch currentQuality {
        case .excellent:
            return AdaptiveConfig(
                imageQuality: 1.0,
                preloadEnabled: true,
                aiEnabled: true,
                syncEnabled: true
            )
        case .good:
            return AdaptiveConfig(
                imageQuality: 0.8,
                preloadEnabled: true,
                aiEnabled: true,
                syncEnabled: true
            )
        case .moderate:
            return AdaptiveConfig(
                imageQuality: 0.6,
                preloadEnabled: false,
                aiEnabled: true,
                syncEnabled: false
            )
        case .poor:
            return AdaptiveConfig(
                imageQuality: 0.4,
                preloadEnabled: false,
                aiEnabled: false,      // ç¦»çº¿è¯å…¸ä¼˜å…ˆ
                syncEnabled: false
            )
        case .offline:
            return AdaptiveConfig(
                imageQuality: 0,
                preloadEnabled: false,
                aiEnabled: false,
                syncEnabled: false
            )
        }
    }

    /// è·å–æœ€ä½³å›¾ç‰‡URL (æ ¹æ®ç½‘ç»œè´¨é‡)
    func getOptimalImageURL(_ originalURL: String) -> String {
        let quality = getAdaptiveConfig().imageQuality

        if quality >= 1.0 {
            return originalURL
        } else if quality >= 0.6 {
            // ä½¿ç”¨ç¼©ç•¥å›¾
            return originalURL.replacingOccurrences(of: ".jpg", with: "_medium.jpg")
        } else if quality > 0 {
            // ä½¿ç”¨å°å›¾
            return originalURL.replacingOccurrences(of: ".jpg", with: "_thumb.jpg")
        } else {
            // ç¦»çº¿ï¼Œä½¿ç”¨æœ¬åœ°ç¼“å­˜
            return "local://placeholder"
        }
    }
}
```

---


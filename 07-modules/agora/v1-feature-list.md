# 城邦（Agora）V1 版本功能清单

> **版本**: V1.0
> **最后更新**: 2026-01-01
> **状态**: 开发中

---

## 一、版本概述

### 1.1 V1 核心目标

- 实现城邦基础信息流展示
- 支持点赞和分享互动
- 提供内容屏蔽和举报功能

### 1.2 V1 不包含的功能

| 功能 | 状态 | 计划版本 |
|------|------|----------|
| 评论功能 | ❌ 不包含 | V2 |
| 用户发帖 | ❌ 不包含 | V2 |
| 关注系统 | ❌ 不包含 | V2 |
| 互动通知 | ❌ 不包含 | V2 |

---

## 二、V1 功能清单

### 2.1 信息流展示

| 功能 | 状态 | 说明 |
|------|------|------|
| 帖子列表 | ✅ | 金句信息流展示 |
| 下拉刷新 | ✅ | 刷新最新内容 |
| 上拉加载更多 | ✅ | 分页加载 |
| 骨架屏加载 | ✅ | 首次加载占位 |
| 空状态提示 | ✅ | 无数据时提示 |

### 2.2 帖子卡片

| 功能 | 状态 | 说明 |
|------|------|------|
| 作者头像 | ✅ | AI生成的艺术风格头像 |
| 作者名称 | ✅ | 显示作者姓名 |
| 发布时间 | ✅ | 相对时间显示 |
| 金句内容 | ✅ | 主要内容展示 |
| 来源信息 | ✅ | 书名、章节 |
| 点赞数量 | ✅ | 显示点赞总数 |
| 分享按钮 | ✅ | 分享入口 |

### 2.3 互动功能

| 功能 | 状态 | 说明 |
|------|------|------|
| 点赞 | ✅ | 点击点赞/取消点赞 |
| 点赞动画 | ✅ | 心形放大回弹 |
| 双击点赞 | ✅ | 快速点赞 |
| 分享图片 | ✅ | 生成金句图片 |
| 分享到微信 | ✅ | 需集成SDK |
| 复制文字 | ✅ | 复制金句文本 |
| 系统分享 | ✅ | 调用系统分享面板 |

### 2.4 管理功能

| 功能 | 状态 | 说明 |
|------|------|------|
| 不感兴趣 | ✅ | 隐藏单条帖子 |
| 屏蔽作者 | ✅ | 不再显示该作者内容 |
| 取消屏蔽 | ✅ | 恢复显示 |
| 举报帖子 | ✅ | 举报不当内容 |
| 屏蔽列表 | ✅ | 查看已屏蔽项 |

---

## 三、API 端点

### 3.1 V1 端点清单

| 方法 | 端点 | 说明 |
|------|------|------|
| GET | `/agora/posts` | 获取帖子列表 |
| GET | `/agora/posts/:id` | 获取单个帖子详情 |
| POST | `/agora/posts/:id/like` | 点赞帖子 |
| DELETE | `/agora/posts/:id/like` | 取消点赞 |
| POST | `/agora/posts/:id/share` | 记录分享 |
| POST | `/agora/posts/:id/hide` | 隐藏帖子 |
| POST | `/agora/authors/:id/block` | 屏蔽作者 |
| DELETE | `/agora/authors/:id/block` | 取消屏蔽 |
| GET | `/agora/blocked` | 获取屏蔽列表 |
| POST | `/agora/posts/:id/report` | 举报帖子 |

---

## 四、数据模型

### 4.1 V1 数据结构

```
AgoraPost (V1)
├── id: String
├── author: Author
├── quote: Quote
├── simulatedPostTime: Date
├── likeCount: Int
├── shareCount: Int
├── isLiked: Bool
└── isBookmarked: Bool
```

### 4.2 V2 扩展字段（预留）

```
AgoraPost (V2 扩展)
├── commentCount: Int      // 评论数
└── comments: [Comment]?   // 评论列表
```

---

## 五、UI 组件

### 5.1 V1 组件清单

| 组件 | 文件名 | 状态 |
|------|--------|------|
| 主视图 | `AgoraView.swift` | ✅ |
| 帖子卡片 | `AgoraPostCard.swift` | ✅ |
| 作者头像 | `AuthorAvatarView.swift` | ✅ |
| 帖子头部 | `PostHeaderView.swift` | ✅ |
| 互动按钮栏 | `PostActionsView.swift` | ✅ |
| 分享面板 | `ShareSheet.swift` | ✅ |
| 更多操作 | `MoreActionsSheet.swift` | ✅ |
| 作者主页 | `AuthorProfileView.swift` | ⏳ 待开发 |

### 5.2 V2 新增组件

| 组件 | 文件名 | 状态 |
|------|--------|------|
| 评论区 | `PostCommentsView.swift` | V2 |
| 评论输入 | `CommentInputView.swift` | V2 |
| 评论单元 | `CommentCell.swift` | V2 |

---

## 六、实现进度

### 6.1 Phase 1: 核心功能（MVP）

- [x] 信息流列表展示
- [x] 帖子卡片（头像、金句、来源）
- [x] 点赞功能
- [x] 相对时间显示
- [x] 底部Tab集成

### 6.2 Phase 2: 管理功能

- [ ] 分享功能（图片生成）
- [ ] 屏蔽帖子
- [ ] 屏蔽作者
- [ ] 举报功能

### 6.3 Phase 3: 增强功能

- [ ] 作者主页
- [ ] 搜索/筛选
- [ ] 收藏功能

---

## 七、测试检查清单

### 7.1 功能测试

- [ ] 帖子列表正常加载
- [ ] 下拉刷新正常工作
- [ ] 上拉加载更多正常工作
- [ ] 点赞/取消点赞正常
- [ ] 点赞动画流畅
- [ ] 分享功能正常
- [ ] 屏蔽功能正常
- [ ] 举报功能正常

### 7.2 性能测试

- [ ] 首屏加载时间 < 2s
- [ ] 滚动流畅无卡顿
- [ ] 内存使用正常

### 7.3 边界情况

- [ ] 无网络状态提示
- [ ] 空数据状态显示
- [ ] 加载失败重试

---

## 八、版本历史

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| V1.0 | 2026-01-01 | 初始版本，不含评论功能 |

---

## 九、相关文档

- [城邦功能设计文档](./feature-design.md)
- [城邦数据准备](./data-preparation.md)
- [V2 评论功能设计](./comment.md)

# 书籍列表推荐算法设计文档

> Book Ranking & Recommendation Algorithm - 打造极具吸引力的发现页体验

---

## 1. 概述

### 1.1 设计目标

构建一套智能的书籍推荐排序算法，确保用户打开发现页时：
- 看到最符合个人兴趣的书籍
- 发现高质量、高人气的优质内容
- 获得新鲜感和探索欲
- 产生强烈的阅读动机

### 1.2 核心原则

| 原则 | 说明 |
|------|------|
| **个性化优先** | 用户偏好权重最高，千人千面 |
| **质量为王** | 优质内容应获得更多曝光 |
| **热度加成** | 近期热门内容获得时效性加分 |
| **多样性保障** | 避免信息茧房，保持探索空间 |
| **新书推荐** | 新上架优质书籍获得冷启动扶持 |

---

## 2. 整体架构

### 2.1 优先级层级


### 2.2 最终得分公式


**权重配置（可动态调整）：**

| 权重 | 参数名 | 默认值 | 说明 |
|------|--------|--------|------|
| W₀ | DashboardBoost | 10000 | Dashboard书单置顶 |
| W₁ | AIRecommendBoost | 5000 | AI推荐书单优先 |
| W₂ | BookQualityScore | 0.25 | 书籍质量权重 |
| W₃ | PopularityScore | 0.20 | 热度权重 |
| W₄ | PersonalizationScore | 0.25 | 个性化权重 |
| W₅ | AuthorPopularityScore | 0.10 | 作者热度权重 |
| W₆ | FreshnessScore | 0.08 | 新鲜度权重 |
| W₇ | DiversityScore | 0.07 | 多样性权重 |
| W₈ | EngagementScore | 0.05 | 参与度权重 |

---

## 3. Level 0：Dashboard 编辑精选

### 3.1 功能说明

运营人员通过 Dashboard 手动配置的书单，享有最高展示优先级。

### 3.2 数据模型


### 3.3 优先级计算


---

## 4. Level 1：AI 个性化推荐

### 4.1 推荐策略

AI 推荐基于多种策略的混合：

| 策略 | 权重 | 说明 |
|------|------|------|
| 协同过滤 | 30% | 相似用户喜欢的书 |
| 内容推荐 | 30% | 相似内容的书 |
| 知识图谱 | 20% | 关联作者/主题的书 |
| 探索推荐 | 10% | 跨类别新鲜推荐 |
| 热门趋势 | 10% | 近期热门书籍 |

### 4.2 AI 推荐分计算（6个维度）


---

## 5. Level 2：书籍综合排序算法

### 5.1 书籍质量分（BookQualityScore）

**6个评分维度：**


### 5.2 热度分（PopularityScore）

**8个热度维度：**


### 5.3 个性化分（PersonalizationScore）

**7个个性化维度：**


### 5.4 作者热度分（AuthorPopularityScore）

**7个作者热度维度：**


### 5.5 新鲜度分（FreshnessScore）

**5个新鲜度维度：**


### 5.6 多样性分（DiversityScore）

**5个多样性维度：**


### 5.7 参与度分（EngagementScore）

**6个参与度预测维度：**


---

## 6. 行业最佳实践参考

### 6.1 参考产品分析

| 产品 | 核心策略 | 可借鉴点 |
|------|----------|----------|
| **微信读书** | 社交关系链 + 阅读时长激励 | 好友在读、本周阅读榜 |
| **Kindle** | 基于购买历史的协同过滤 | "购买此书的人也买了" |
| **豆瓣读书** | UGC评分+书评驱动 | 高质量书评置顶 |
| **得到** | 专家背书+体系化内容 | 课程关联、名师推荐 |
| **网易蜗牛** | 每天免费阅读时长+领读人 | 时间限制创造稀缺感 |
| **Goodreads** | 社区书单+阅读挑战 | 年度阅读目标、书单 |
| **Apple Books** | 编辑精选+本地化榜单 | 地区特色推荐 |
| **Audible** | 语音内容+系列推荐 | 一键购买系列后续 |

### 6.2 额外补充维度

基于行业实践，补充以下计算维度：

#### 6.2.1 社交热度分（SocialHeatScore）


#### 6.2.2 时效热点分（TrendingScore）


#### 6.2.3 阅读挑战关联分（ChallengeScore）


---

## 7. 数据模型与存储

### 7.1 书籍扩展模型


### 7.2 用户画像模型


### 7.3 Dashboard 配置模型


---

## 8. API 设计

### 8.1 发现页 API


### 8.2 Dashboard 管理 API


### 8.3 分数更新 Job


---

## 9. 算法调优与监控

### 9.1 A/B 测试框架


### 9.2 监控指标

| 指标 | 说明 | 目标 |
|------|------|------|
| **发现页 CTR** | 曝光点击率 | > 15% |
| **首屏点击率** | 首屏书籍点击率 | > 25% |
| **阅读转化率** | 点击后开始阅读比例 | > 40% |
| **加架率** | 点击后加入书架比例 | > 20% |
| **平均滑动深度** | 用户平均浏览位置 | > 10本 |
| **多样性指数** | 点击书籍类别分散度 | > 0.6 |
| **新书曝光率** | 7天内新书曝光占比 | > 10% |

### 9.3 异常检测


---

## 10. 实现路线图

### Phase 1: MVP (2周)

- [ ] 实现基础书籍质量分计算
- [ ] 实现基础热度分计算
- [ ] 完成 Dashboard 书单配置功能
- [ ] 发现页 API 基础实现

### Phase 2: 个性化 (2周)

- [ ] 用户画像收集与存储
- [ ] 实现个性化分计算
- [ ] 集成 AI 推荐模块
- [ ] 多样性算法实现

### Phase 3: 优化 (2周)

- [ ] 作者热度分计算
- [ ] 社交热度分计算
- [ ] 时效热点分计算
- [ ] A/B 测试框架

### Phase 4: 高级 (持续)

- [ ] 实时个性化推荐
- [ ] 深度学习排序模型
- [ ] 多目标优化
- [ ] 用户反馈闭环

---

## 11. 附录

### 11.1 归一化函数


### 11.2 冷启动策略

| 场景 | 策略 |
|------|------|
| **新用户** | 展示编辑精选 + 全站热门 + 类别引导 |
| **新书籍** | 编辑冷启动扶持 + 相似书籍推荐位借流 |
| **新作者** | 基于作品内容的向量匹配推荐 |

---

## 实施进度

| 版本 | 状态 | 完成度 | 更新日期 | 说明 |
|------|------|--------|----------|------|
| v1.0 | 部分实现 | 40% | 2026-02 | Phase 1 基础评分已实现，AI 推荐相关部分已废弃 |

> **重要变更**: AI 个性化推荐 (Level 1) 已计划废弃，替代为基于规则的推荐。
> 参见 [AI 服务废弃迁移指南](../../deprecated/ai-services-migration.md)

### 已完成
- [x] 算法整体架构设计（三级优先级架构）
- [x] 评分维度设计文档
- [x] 行业最佳实践调研（8大平台）
- [x] Phase 1 基础评分系统实现（质量分 + 热度分 + 新鲜度分）
- [x] 发现页 API 实现
- [x] 评分定时任务
- [x] 发现页缓存服务

### 已废弃
- ~~AI 推荐模块集成~~ (AI 服务整体废弃)
- ~~协同过滤推荐~~ (依赖 AI)
- ~~深度学习排序模型~~ (依赖 AI)

### 待开发
- [ ] 用户画像收集与存储
- [ ] 基于规则的个性化推荐（替代 AI 推荐）
- [ ] 作者热度分计算
- [ ] 多样性算法实现
- [ ] A/B 测试框架实现

### 依赖项
- 需要用户行为追踪系统（阅读时长、划线、笔记等）
- 需要后台榜单管理界面（Dashboard 配置）
- 需要用户画像存储设计

---

*文档版本: 1.0*
*创建日期: 2024-12*
*状态: 待 Review*

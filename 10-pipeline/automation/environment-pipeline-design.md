# Environment Pipeline è®¾è®¡æ–‡æ¡£

## 1. æ¦‚è¿°

### 1.1 ç›®æ ‡

æ„å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–Pipelineï¼Œè¾“å…¥**ç›®æ ‡ç¯å¢ƒ**å’Œ**ä¹¦å•**ï¼Œè¾“å‡ºå®Œæ•´é…ç½®å¥½çš„å¯ä¾›å®¢æˆ·ç«¯è®¿é—®çš„APIç¯å¢ƒã€‚

### 1.2 è¾“å…¥è¾“å‡º

| ç±»å‹ | å†…å®¹ |
|------|------|
| **è¾“å…¥** | ç›®æ ‡ç¯å¢ƒ (production/staging/debugging/local) + ä¹¦å•JSONæ–‡ä»¶ |
| **è¾“å‡º** | å®Œæ•´å¯ç”¨çš„APIç¯å¢ƒï¼ˆæ•°æ®åº“æ•°æ® + R2æ–‡ä»¶ + éªŒè¯é€šè¿‡çš„APIç«¯ç‚¹ï¼‰ |

### 1.3 æ“ä½œæ–¹å¼

Dashboard å”¯ä¸€å…¥å£ï¼Œå‘å¯¼å¼æ“ä½œç•Œé¢ã€‚

---

## 2. Pipeline å¤„ç†ç¯èŠ‚æ€»è§ˆ

Pipeline å…±åˆ†ä¸º **8ä¸ªé˜¶æ®µã€46ä¸ªå¤„ç†èŠ‚ç‚¹**ï¼š

```mermaid
flowchart TD
    subgraph stage1["é˜¶æ®µ1: è¾“å…¥è§£æ (3èŠ‚ç‚¹)"]
        N1_1["1.1 è¯»å–ä¹¦å•"] --> N1_2["1.2 è§£æéªŒè¯"] --> N1_3["1.3 å»é‡æ£€æŸ¥"]
    end
    stage1 --> stage2
    subgraph stage2["é˜¶æ®µ2: ç¯å¢ƒå‡†å¤‡ (4èŠ‚ç‚¹)"]
        N2_1["2.1 åŠ è½½é…ç½®"] --> N2_2["2.2 éªŒè¯DB"] --> N2_3["2.3 éªŒè¯R2"] --> N2_4["2.4 åˆ›å»ºæ‰¹æ¬¡"]
    end
    stage2 --> stage3
    subgraph stage3["é˜¶æ®µ3: ä¹¦ç±åŒ¹é… (3èŠ‚ç‚¹)"]
        N3_1["3.1 SEåŒ¹é…"] --> N3_2["3.2 PGåŒ¹é…"] --> N3_3["3.3 è®°å½•å¤±è´¥"]
    end
    stage3 --> stage4
    subgraph stage4["é˜¶æ®µ4: ä¹¦ç±å¯¼å…¥ (11èŠ‚ç‚¹)"]
        N4_1["4.1 å­˜åœ¨æ£€æŸ¥"] --> N4_2["4.2 R2ç¼“å­˜"] --> N4_3["4.3 è·å–å†…å®¹"] --> N4_4["4.4 è§£æå…ƒæ•°æ®"] --> N4_5["4.5 å…ƒæ•°æ®ä¸°å¯Œ"]
        N4_5 --> N4_6["4.6 æå–ç« èŠ‚"] --> N4_7["4.7 å°é¢å¤„ç†"] --> N4_8["4.8 ç¼©ç•¥å›¾"] --> N4_9["4.9 ä¸Šä¼ R2"] --> N4_10["4.10 å†™å…¥DB"]
        N4_10 --> N4_11["4.11 æ›´æ–°è¿›åº¦"]
    end
    stage4 --> stage5
    subgraph stage5["é˜¶æ®µ5: å…³è”æ•°æ®è®¡ç®— (19èŠ‚ç‚¹)"]
        direction LR
        S5_1["5.1 ä½œè€…æ•°æ®<br>5.1.1~5.1.5"]
        S5_2["5.2 åˆ†ç±»æ•°æ®<br>5.2.1~5.2.3"]
        S5_3["5.3 è¯„åˆ†ç»Ÿè®¡<br>5.3.1~5.3.2"]
        S5_4["5.4 å†…å®¹å¢å¼º<br>5.4.1~5.4.3"]
        S5_5["5.5 äººç‰©/æ—¶é—´çº¿<br>5.5.1~5.5.4"]
        S5_6["5.6 åŸé‚¦å†…å®¹<br>5.6.1"]
    end
    stage5 --> stage6
    subgraph stage6["é˜¶æ®µ6: ä¹¦å•å…³è” (2èŠ‚ç‚¹)"]
        N6_1["6.1 åŒ¹é…ä¹¦å•"] --> N6_2["6.2 æ·»åŠ ä¹¦å•é¡¹"]
    end
    stage6 --> stage7
    subgraph stage7["é˜¶æ®µ7: éªŒè¯ (2èŠ‚ç‚¹)"]
        N7_1["7.1 APIå¥åº·"] --> N7_2["7.2 æŠ½æ ·éªŒè¯"]
    end
    stage7 --> stage8
    subgraph stage8["é˜¶æ®µ8: æŠ¥å‘Š (1èŠ‚ç‚¹)"]
        N8_1["8.1 ç”ŸæˆæŠ¥å‘Š"]
    end
```

---

## 2.1 æ•°æ®æµåŠ¨ Workflow

å±•ç¤ºæ•°æ®ä»è¾“å…¥åˆ°è¾“å‡ºçš„å®Œæ•´æµåŠ¨è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ¯ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„æœåŠ¡/ç³»ç»Ÿã€‚

### æœåŠ¡å›¾ä¾‹

| æ ‡è®° | æœåŠ¡ | è¯´æ˜ |
|------|------|------|
| `[Dashboard]` | React Admin Dashboard | å‰ç«¯ç•Œé¢ï¼Œè¿è¡Œåœ¨ç”¨æˆ·æµè§ˆå™¨ |
| `[Backend]` | NestJS Backend | éƒ¨ç½²åœ¨ Fly.io |
| `[Neon]` | PostgreSQL Database | Neon Cloud æ‰˜ç®¡ |
| `[R2]` | Cloudflare R2 | å¯¹è±¡å­˜å‚¨ |
| `[SE]` | Standard Ebooks | å¤–éƒ¨æ•°æ®æº standardebooks.org |
| `[PG]` | Project Gutenberg | å¤–éƒ¨æ•°æ®æº gutenberg.org |
| `[Wiki]` | Wikipedia/Wikidata | å¤–éƒ¨æ•°æ®æº |
| `[AI]` | AI Service | OpenAI/Claude API |

```mermaid
flowchart TD
    subgraph input["è¾“å…¥å±‚"]
        direction LR
        JSON["ä¹¦å•JSONæ–‡ä»¶<br>(phase1-ebooks.json)<br>[Dashboard]"] ~~~ ENV["ç¯å¢ƒé…ç½®<br>(production/staging)<br>[Dashboard]"]
    end

    input --> P12

    subgraph P12["é˜¶æ®µ1-2: è§£æä¸å‡†å¤‡ [Backend]"]
        direction LR
        BI["BookItem[] (248æœ¬)"] --> DEDUP["å»é‡åçš„ BookItem[]"] --> BATCH["ImportBatch è®°å½•<br>[Neon]"]
    end

    P12 --> P3

    subgraph P3["é˜¶æ®µ3: ä¹¦ç±åŒ¹é… [Backend + å¤–éƒ¨]"]
        direction TB
        ITEMS["BookItem[]"] --> SE["SEåŒ¹é…æˆåŠŸ<br>MatchedBook [SE]"]
        ITEMS --> PG["PGåŒ¹é…æˆåŠŸ<br>MatchedBook [PG]"]
        ITEMS --> FAIL["åŒ¹é…å¤±è´¥<br>FailedBook"]
        SE --> MATCHED["MatchedBook[]<br>(å« epubUrl, sourceUrl)"]
        PG --> MATCHED
    end

    P3 --> P4

    subgraph P4["é˜¶æ®µ4: ä¹¦ç±å¯¼å…¥ [Backend + R2 + Neon]"]
        STRATEGY{"ç¯å¢ƒç­–ç•¥åˆ¤æ–­"}
        STRATEGY -->|"R2ç¼“å­˜å‘½ä¸­"| COPY["å¤åˆ¶åˆ°ç›®æ ‡R2 â†’ å†™å…¥DB"]
        STRATEGY -->|"ç¼“å­˜æœªå‘½ä¸­"| DL["ä¸‹è½½EPUB<br>[SE/PG]"] --> PARSE["è§£æå…ƒæ•°æ®<br>[Backend]"] --> ENRICH["å…ƒæ•°æ®ä¸°å¯Œ<br>[Wiki]"] --> CHAP["æå–ç« èŠ‚<br>[Backend]"] --> COVER["å°é¢+ç¼©ç•¥å›¾<br>[Backend]"]
        COVER --> UPLOAD["ä¸Šä¼ åˆ°ç›®æ ‡R2 â†’ å†™å…¥DB<br>[R2] [Neon]"]
    end

    P4 --> P5

    subgraph P5["é˜¶æ®µ5: å…³è”æ•°æ®è®¡ç®— [Backend + Wiki + AI + Neon]"]
        BOOK["Book è®°å½•"] --> A51["5.1 ä½œè€…æ•°æ®<br>[Wiki+Neon]"]
        BOOK --> A52["5.2 åˆ†ç±»æ•°æ®<br>[Neon]"]
        BOOK --> A53["5.3 è¯„åˆ†ç»Ÿè®¡<br>[Neon]"]
        BOOK --> A54["5.4 å†…å®¹å¢å¼º<br>[Wiki+AI]"]
        BOOK --> A55["5.5 äººç‰©å…³ç³»<br>[AI+Neon]"]
        BOOK --> A56["5.6 åŸé‚¦å†…å®¹<br>[Neon]"]
    end

    P5 --> P6

    subgraph P6["é˜¶æ®µ6: ä¹¦å•å…³è” [Backend + Neon]"]
        direction LR
        SEC["Book.section"] --> BL["BookList åŒ¹é…/åˆ›å»º"] --> BLI["BookListItem å…³è”"]
    end

    P6 --> output

    subgraph output["è¾“å‡ºå±‚"]
        direction LR
        NEON["PostgreSQL [Neon]<br>æ ¸å¿ƒè¡¨ / å…³è”è¡¨ / ç»Ÿè®¡è¡¨<br>å†…å®¹è¡¨ / äººç‰©è¡¨ / ç¤¾åŒºè¡¨"]
        R2["Cloudflare R2<br>covers / chapters / epubs"]
        API["API Endpoints [Fly.io]<br>books / authors / categories<br>agora / booklists"]
    end
```

```mermaid
flowchart TD
    subgraph deps["æ•°æ®ä¾èµ–å…³ç³»"]
        BK["Book (æ ¸å¿ƒ)"] --> CH["Chapter"]
        BK --> AU["Author"]
        BK --> CAT["Category"]
        BK --> BS["BookStats / BookScore"]
        BK --> QT["Quote"]
        BK --> BC["BookContext"]
        AU --> AT["AuthorTimeline"]
        AU --> AQ["AuthorQuote"]
        CAT --> BCAT["BookCategory"]
        AQ --> AP["AgoraPost"]
        BK --> BCHAR["BookCharacter"] --> CR["CharacterRelationship"]
        BCHAR --> BCG["BookCharacterGraph"]
        CR --> BCG
        BK --> SE2["StoryEvent"]
        BK --> BL2["BookList"] --> BLI2["BookListItem"]
    end
```

### èŠ‚ç‚¹-æœåŠ¡æ˜ å°„è¡¨

| é˜¶æ®µ | èŠ‚ç‚¹ | æ“ä½œ | ä¸»æœåŠ¡ | å¤–éƒ¨ä¾èµ– | æ•°æ®å­˜å‚¨ |
|------|------|------|--------|----------|----------|
| **1** | 1.1 | è¯»å–ä¹¦å• | Backend | - | - |
| | 1.2 | è§£æéªŒè¯ | Backend | - | - |
| | 1.3 | å»é‡æ£€æŸ¥ | Backend | - | - |
| **2** | 2.1 | åŠ è½½é…ç½® | Backend | - | - |
| | 2.2 | éªŒè¯DB | Backend | - | Neon |
| | 2.3 | éªŒè¯R2 | Backend | - | R2 |
| | 2.4 | åˆ›å»ºæ‰¹æ¬¡ | Backend | - | Neon |
| **3** | 3.1 | SEåŒ¹é… | Backend | Standard Ebooks | - |
| | 3.2 | PGåŒ¹é… | Backend | Gutenberg API | - |
| | 3.3 | è®°å½•å¤±è´¥ | Backend | - | Neon |
| **4** | 4.1 | å­˜åœ¨æ£€æŸ¥ | Backend | - | Neon |
| | 4.2 | R2ç¼“å­˜æ£€æŸ¥ | Backend | - | R2-debug |
| | 4.3 | è·å–å†…å®¹ | Backend | SE / PG / R2-debug | - |
| | 4.4 | è§£æå…ƒæ•°æ® | Backend | - | - |
| | 4.5 | å…ƒæ•°æ®ä¸°å¯Œ | Backend | Wikipedia | - |
| | 4.6 | æå–ç« èŠ‚ | Backend | - | - |
| | 4.7 | å°é¢å¤„ç† | Backend | - | - |
| | 4.8 | ç¼©ç•¥å›¾ç”Ÿæˆ | Backend | - | - |
| | 4.9 | ä¸Šä¼ R2 | Backend | - | R2 (ç›®æ ‡) |
| | 4.10 | å†™å…¥DB | Backend | - | Neon |
| | 4.11 | æ›´æ–°è¿›åº¦ | Backend | - | Neon |
| **5.1** | 5.1.1 | åˆ›å»ºAuthor | Backend | Wikipedia | Neon |
| | 5.1.2 | ä½œè€…ç»Ÿè®¡ | Backend | - | Neon |
| | 5.1.3 | ä½œè€…æ—¶é—´çº¿ | Backend | Wikipedia | Neon |
| | 5.1.4 | ä½œè€…åè¨€ | Backend | - | Neon |
| | 5.1.5 | ä½œè€…å½±å“åŠ› | Backend | Wikipedia | Neon |
| **5.2** | 5.2.1 | è‡ªåŠ¨åˆ†ç±» | Backend | - | - |
| | 5.2.2 | BookCategory | Backend | - | Neon |
| | 5.2.3 | åˆ†ç±»ç»Ÿè®¡ | Backend | - | Neon |
| **5.3** | 5.3.1 | BookStats | Backend | - | Neon |
| | 5.3.2 | BookScore | Backend | - | Neon |
| **5.4** | 5.4.1 | BookContext | Backend | Wikipedia | Neon |
| | 5.4.2 | ReadingGuide | Backend | AI Service | Neon |
| | 5.4.3 | Quoteæå– | Backend | AI Service | Neon |
| **5.5** | 5.5.1 | BookCharacter | Backend | AI / Wikidata | Neon |
| | 5.5.2 | äººç‰©å…³ç³» | Backend | AI Service | Neon |
| | 5.5.3 | å…³ç³»å›¾ | Backend | - | Neon |
| | 5.5.4 | StoryEvent | Backend | AI Service | Neon |
| **5.6** | 5.6.1 | AgoraPost | Backend | - | Neon |
| **6** | 6.1 | åŒ¹é…ä¹¦å• | Backend | - | Neon |
| | 6.2 | æ·»åŠ ä¹¦å•é¡¹ | Backend | - | Neon |
| **7** | 7.1 | APIå¥åº· | Backend | - | - |
| | 7.2 | æŠ½æ ·éªŒè¯ | Backend | - | Neon + R2 |
| **8** | 8.1 | ç”ŸæˆæŠ¥å‘Š | Backend | - | Neon |

### å¤–éƒ¨æœåŠ¡æ±‡æ€»

| æœåŠ¡ | ç”¨é€” | ä½¿ç”¨èŠ‚ç‚¹ |
|------|------|----------|
| **Standard Ebooks** | EPUBæº | 3.1, 4.3 |
| **Project Gutenberg** | EPUBæº | 3.2, 4.3 |
| **R2-debug** | å†…å®¹ç¼“å­˜ï¼ˆstaging/productionç¯å¢ƒï¼‰ | 4.2, 4.3 |
| **Wikipedia** | ä½œè€…ä¿¡æ¯ã€ä¹¦ç±èƒŒæ™¯ã€å…ƒæ•°æ®ä¸°å¯Œ | 4.5, 5.1.1, 5.1.3, 5.1.5, 5.4.1 |
| **Wikidata** | ç»“æ„åŒ–æ•°æ® | 5.1.1, 5.5.1 |
| **AI Service** | å†…å®¹ç”Ÿæˆã€åˆ†æ | 5.4.2, 5.4.3, 5.5.1, 5.5.2, 5.5.4 |

---

## 3. å„é˜¶æ®µè¯¦ç»†è®¾è®¡

### é˜¶æ®µ1: è¾“å…¥è§£æ

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | å¤±è´¥å¤„ç† |
|------|------|------|----------|------|----------|
| 1.1 | è¯»å–ä¹¦å• | ä¹¦å•æ–‡ä»¶è·¯å¾„ | ä» `/data/booklists/` è¯»å–JSONæ–‡ä»¶ | åŸå§‹JSONæ•°æ® | ç»ˆæ­¢Pipelineï¼Œæç¤ºæ–‡ä»¶ä¸å­˜åœ¨ |
| 1.2 | è§£æéªŒè¯ | åŸå§‹JSON | éªŒè¯JSONæ ¼å¼ï¼Œæå–booksæ•°ç»„ï¼ŒéªŒè¯å¿…å¡«å­—æ®µ(title, author) | `BookItem[]` | ç»ˆæ­¢Pipelineï¼Œæç¤ºæ ¼å¼é”™è¯¯ |
| 1.3 | å»é‡æ£€æŸ¥ | `BookItem[]` | æŒ‰title+authorå»é‡ï¼Œè®°å½•é‡å¤é¡¹ | å»é‡åçš„ `BookItem[]` + é‡å¤ç»Ÿè®¡ | ä»…è­¦å‘Šï¼Œç»§ç»­æ‰§è¡Œ |

**BookItem ç»“æ„ï¼š**
```typescript
interface BookItem {
  title: string;        // å¿…å¡«
  author: string;       // å¿…å¡«
  chineseTitle?: string;
  section?: string;
}
```

---

### é˜¶æ®µ2: ç¯å¢ƒå‡†å¤‡

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | å¤±è´¥å¤„ç† |
|------|------|------|----------|------|----------|
| 2.1 | åŠ è½½é…ç½® | ç¯å¢ƒåç§° | åŠ è½½å¯¹åº”ç¯å¢ƒçš„é…ç½®ï¼ˆDB URL, R2é…ç½®ç­‰ï¼‰ | `EnvironmentConfig` | ç»ˆæ­¢Pipelineï¼Œæç¤ºé…ç½®é”™è¯¯ |
| 2.2 | éªŒè¯DB | DBè¿æ¥é…ç½® | æµ‹è¯•æ•°æ®åº“è¿æ¥ï¼Œæ£€æŸ¥schemaç‰ˆæœ¬ | è¿æ¥æˆåŠŸç¡®è®¤ | ç»ˆæ­¢Pipelineï¼Œæç¤ºDBè¿æ¥å¤±è´¥ |
| 2.3 | éªŒè¯R2 | R2é…ç½® | æµ‹è¯•R2è¿æ¥ï¼Œæ£€æŸ¥bucketæƒé™ | è¿æ¥æˆåŠŸç¡®è®¤ | ç»ˆæ­¢Pipelineï¼Œæç¤ºR2è¿æ¥å¤±è´¥ |
| 2.4 | åˆ›å»ºæ‰¹æ¬¡ | é…ç½®ä¿¡æ¯ | åœ¨ImportBatchè¡¨åˆ›å»ºè®°å½•ï¼ŒçŠ¶æ€=RUNNING | `ImportBatch` è®°å½• | ç»ˆæ­¢Pipelineï¼Œæç¤ºåˆ›å»ºå¤±è´¥ |

**ç¯å¢ƒé…ç½®æ˜ å°„ï¼š**

| ç¯å¢ƒ | æ•°æ®åº“ | R2 Bucket | API URL |
|------|--------|-----------|---------|
| local | æœ¬åœ°PostgreSQL | æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ | localhost:3000 |
| debugging | Neon debugging | readmigo-debug | readmigo-debug.fly.dev |
| staging | Neon staging | readmigo-staging | staging-api.readmigo.app |
| production | Neon production | readmigo | api.readmigo.app |

---

### é˜¶æ®µ3: ä¹¦ç±åŒ¹é…

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | å¤±è´¥å¤„ç† |
|------|------|------|----------|------|----------|
| 3.1 | SEåŒ¹é… | `BookItem` | æ„å»ºStandard Ebooks URLï¼ŒéªŒè¯æ˜¯å¦å­˜åœ¨ | åŒ¹é…æˆåŠŸçš„ä¹¦ç±åˆ—è¡¨ | ä¼ é€’ç»™3.2ç»§ç»­åŒ¹é… |
| 3.2 | PGåŒ¹é… | SEæœªåŒ¹é…çš„ä¹¦ç± | è°ƒç”¨Gutenberg APIæœç´¢ï¼Œé€‰æ‹©æœ€ä½³åŒ¹é… | åŒ¹é…æˆåŠŸçš„ä¹¦ç±åˆ—è¡¨ | ä¼ é€’ç»™3.3è®°å½• |
| 3.3 | è®°å½•å¤±è´¥ | æœªåŒ¹é…çš„ä¹¦ç± | è®°å½•æ— æ³•åŒ¹é…çš„ä¹¦ç±ï¼Œå†™å…¥é”™è¯¯æ—¥å¿— | å¤±è´¥ä¹¦ç±åˆ—è¡¨ | ä»…è®°å½•ï¼Œç»§ç»­æ‰§è¡Œ |

**åŒ¹é…è§„åˆ™ï¼š**

```
Standard Ebooks URL æ„å»ºè§„åˆ™ï¼š
  title: "Pride and Prejudice"
  author: "Jane Austen"
  â†’ https://standardebooks.org/ebooks/jane-austen/pride-and-prejudice

Gutenberg æœç´¢è§„åˆ™ï¼š
  API: https://gutendex.com/books?search={title}+{author}
  åŒ¹é…ç­–ç•¥: æ ‡é¢˜ç›¸ä¼¼åº¦ > 80% && ä½œè€…åŒ¹é…
```

**åŒ¹é…ç»“æœç»“æ„ï¼š**
```typescript
interface MatchedBook {
  original: BookItem;
  source: 'STANDARD_EBOOKS' | 'GUTENBERG';
  sourceUrl: string;
  epubUrl: string;
  confidence: number;  // 0-100
}
```

---

### é˜¶æ®µ4: ä¹¦ç±å¯¼å…¥

**å¾ªç¯å¤„ç†æ¯æœ¬ä¹¦ï¼Œæ”¯æŒå¹¶è¡Œ (é»˜è®¤3æœ¬åŒæ—¶)**

#### 4.0 ç¯å¢ƒå¤„ç†ç­–ç•¥

æ ¹æ®ç›®æ ‡ç¯å¢ƒä¸åŒï¼ŒPipeline é‡‡ç”¨ä¸åŒçš„å†…å®¹è·å–ç­–ç•¥ï¼š

| ç›®æ ‡ç¯å¢ƒ | å†…å®¹è·å–ç­–ç•¥ | è¯´æ˜ |
|---------|-------------|------|
| **debug** | ç›´æ¥ä» Source ä¸‹è½½ | å§‹ç»ˆä» Standard Ebooks / Gutenberg è·å–æœ€æ–°å†…å®¹ |
| **staging** | R2-debug â†’ Source | ä¼˜å…ˆä» R2-debug å¤åˆ¶ï¼Œæœªå‘½ä¸­åˆ™ä» Source ä¸‹è½½ |
| **production** | R2-debug â†’ Source | ä¼˜å…ˆä» R2-debug å¤åˆ¶ï¼Œæœªå‘½ä¸­åˆ™ä» Source ä¸‹è½½ |

```mermaid
flowchart TD
    A["MatchedBook"] --> B{"R2-debug<br>æœ‰å†…å®¹?"}
    B -->|Yes| C["å¤åˆ¶åˆ°ç›®æ ‡R2 bucket<br>(ç« èŠ‚+å°é¢+ç¼©ç•¥å›¾)"]
    B -->|No| D["ä» Source<br>ä¸‹è½½ EPUB"] --> E["å¤„ç†å†…å®¹<br>(è§£æ/ä¸°å¯Œ)"] --> F["ä¸Šä¼ åˆ°ç›®æ ‡R2 bucket"]
```

#### 4.1 å¤„ç†èŠ‚ç‚¹

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | å¤±è´¥å¤„ç† |
|------|------|------|----------|------|----------|
| 4.1 | å­˜åœ¨æ£€æŸ¥ | `MatchedBook` | æŸ¥è¯¢ç›®æ ‡DBæ˜¯å¦å·²å­˜åœ¨(source+sourceId) | æ˜¯å¦è·³è¿‡æ ‡è®° | è·³è¿‡è¯¥ä¹¦ï¼Œç»§ç»­ä¸‹ä¸€æœ¬ |
| 4.2 | R2ç¼“å­˜æ£€æŸ¥ | `MatchedBook` | æ£€æŸ¥R2-debugæ˜¯å¦æœ‰è¯¥ä¹¦å†…å®¹ï¼ˆä»…staging/productionï¼‰ | ç¼“å­˜å‘½ä¸­æ ‡è®° | ç»§ç»­ä¸‹è½½æµç¨‹ |
| 4.3 | è·å–å†…å®¹ | `MatchedBook` + ç¼“å­˜æ ‡è®° | å‘½ä¸­ï¼šä»R2-debugå¤åˆ¶ï¼›æœªå‘½ä¸­ï¼šä»Sourceä¸‹è½½EPUB | å†…å®¹æ•°æ® | è®°å½•å¤±è´¥ï¼Œç»§ç»­ä¸‹ä¸€æœ¬ |
| 4.4 | è§£æå…ƒæ•°æ® | EPUBæ–‡ä»¶ | æå–title, author, description, language, coverç­‰ | `BookMetadata` | è®°å½•å¤±è´¥ï¼Œç»§ç»­ä¸‹ä¸€æœ¬ |
| 4.5 | å…ƒæ•°æ®ä¸°å¯Œ | `BookMetadata` | ä»Wikipedia/Wikidataè·å–è¡¥å……ä¿¡æ¯ï¼Œè®¡ç®—éš¾åº¦è¯„åˆ† | `EnrichedMetadata` | ä»…è­¦å‘Šï¼Œä½¿ç”¨åŸºç¡€æ•°æ® |
| 4.6 | æå–ç« èŠ‚ | EPUBæ–‡ä»¶ | è§£æTOCï¼Œæå–å„ç« èŠ‚HTMLå†…å®¹ | `Chapter[]` | è®°å½•å¤±è´¥ï¼Œç»§ç»­ä¸‹ä¸€æœ¬ |
| 4.7 | å°é¢å¤„ç† | åŸå§‹å°é¢ | å¤„ç†å°é¢å›¾ç‰‡ï¼šè°ƒæ•´å°ºå¯¸ã€ä¼˜åŒ–è´¨é‡ | å¤„ç†åå°é¢ | ä½¿ç”¨é»˜è®¤å°é¢ |
| 4.8 | ç¼©ç•¥å›¾ç”Ÿæˆ | å¤„ç†åå°é¢ | ç”Ÿæˆå¤šå°ºå¯¸ç¼©ç•¥å›¾ï¼ˆsmall/medium/largeï¼‰ | ç¼©ç•¥å›¾é›† | ä»…è­¦å‘Š |
| 4.9 | ä¸Šä¼ R2 | ç« èŠ‚+å°é¢+ç¼©ç•¥å›¾ | ä¸Šä¼ æ‰€æœ‰å†…å®¹åˆ°ç›®æ ‡ç¯å¢ƒR2 bucket | R2 URLs | è®°å½•å¤±è´¥ï¼Œç»§ç»­ä¸‹ä¸€æœ¬ |
| 4.10 | å†™å…¥DB | æ‰€æœ‰æ•°æ® | å†™å…¥Book, Chapter, Authorå…³è” | DBè®°å½•ID | è®°å½•å¤±è´¥ï¼Œç»§ç»­ä¸‹ä¸€æœ¬ |
| 4.11 | æ›´æ–°è¿›åº¦ | å®ŒæˆçŠ¶æ€ | æ›´æ–°ImportBatchè¿›åº¦ï¼Œæ¨é€çŠ¶æ€æ›´æ–° | è¿›åº¦ç™¾åˆ†æ¯” | ä»…è®°å½• |

#### 4.2 å…ƒæ•°æ®ä¸°å¯Œ (èŠ‚ç‚¹4.5)

| æ•°æ®é¡¹ | æ¥æº | è¯´æ˜ |
|--------|------|------|
| éš¾åº¦è¯„åˆ† | è®¡ç®— | åŸºäºè¯æ±‡å¤æ‚åº¦ã€å¥å­é•¿åº¦ç­‰è®¡ç®— |
| ä½œè€…ä¿¡æ¯ | Wikipedia | ç”Ÿå’å¹´ã€å›½ç±ã€æ–‡å­¦æ—¶æœŸ |
| ä¹¦ç±èƒŒæ™¯ | Wikipedia | åˆ›ä½œèƒŒæ™¯ã€å†å²åœ°ä½ |
| ä¸»é¢˜æ ‡ç­¾ | AIåˆ†æ | è‡ªåŠ¨æå–ä¸»é¢˜å…³é”®è¯ |

#### 4.3 å°é¢ä¸ç¼©ç•¥å›¾ (èŠ‚ç‚¹4.7-4.8)

| å›¾ç‰‡ç±»å‹ | å°ºå¯¸ | ç”¨é€” |
|---------|------|------|
| cover.jpg | åŸå§‹/æœ€å¤§1200px | è¯¦æƒ…é¡µå±•ç¤º |
| cover-thumb-sm.jpg | 120x180 | åˆ—è¡¨ç¼©ç•¥å›¾ |
| cover-thumb-md.jpg | 240x360 | å¡ç‰‡å±•ç¤º |
| cover-thumb-lg.jpg | 480x720 | é¢„è§ˆå›¾ |

**R2 å­˜å‚¨è·¯å¾„ï¼š**
```
/books/{bookId}/
  â”œâ”€â”€ cover.jpg              # å°é¢å›¾ç‰‡ (å¤„ç†å)
  â”œâ”€â”€ cover-thumb-sm.jpg     # å°ç¼©ç•¥å›¾
  â”œâ”€â”€ cover-thumb-md.jpg     # ä¸­ç¼©ç•¥å›¾
  â”œâ”€â”€ cover-thumb-lg.jpg     # å¤§ç¼©ç•¥å›¾
  â””â”€â”€ chapters/
      â”œâ”€â”€ ch001.html         # ç« èŠ‚å†…å®¹
      â”œâ”€â”€ ch002.html
      â””â”€â”€ ...
```

**å•æœ¬ä¹¦å¤„ç†çŠ¶æ€ï¼š**
```typescript
enum BookProcessStatus {
  PENDING = 'pending',      // ç­‰å¾…å¤„ç†
  MATCHING = 'matching',    // æ­£åœ¨åŒ¹é…
  DOWNLOADING = 'downloading', // æ­£åœ¨ä¸‹è½½
  PROCESSING = 'processing',   // æ­£åœ¨å¤„ç†
  UPLOADING = 'uploading',     // æ­£åœ¨ä¸Šä¼ 
  COMPLETED = 'completed',     // å®Œæˆ
  SKIPPED = 'skipped',         // å·²è·³è¿‡(å·²å­˜åœ¨)
  FAILED = 'failed'            // å¤±è´¥
}
```

---

### é˜¶æ®µ5: å…³è”æ•°æ®è®¡ç®— (æ ¸å¿ƒæ‰©å±•)

æœ¬é˜¶æ®µæ˜¯Pipelineæœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œéœ€è¦æ ¹æ®å¯¼å…¥çš„ä¹¦ç±è®¡ç®—å’Œå¡«å……æ‰€æœ‰å…³è”è¡¨æ ¼æ•°æ®ã€‚

#### 5.1 ä½œè€…æ•°æ®å¤„ç†

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | æ•°æ®è¡¨ | å¿…å¡«å­—æ®µ |
|------|------|------|----------|------|--------|----------|
| 5.1.1 | åˆ›å»º/å…³è”Author | ä¹¦ç±authorå­—æ®µ | æŸ¥è¯¢æ˜¯å¦å·²å­˜åœ¨â†’ä¸å­˜åœ¨åˆ™åˆ›å»º | Authorè®°å½• | `Author` | name |
| 5.1.2 | æ›´æ–°ä½œè€…ç»Ÿè®¡ | Author ID | è®¡ç®—bookCount, quoteCount | ç»Ÿè®¡æ•°æ® | `Author` | bookCount |
| 5.1.3 | ä½œè€…æ—¶é—´çº¿ | Authorä¿¡æ¯ | ä»Wikipedia/å¤–éƒ¨æºè·å–ç”Ÿå¹³äº‹ä»¶ | æ—¶é—´çº¿æ•°æ® | `AuthorTimelineEvent` | year, title, category |
| 5.1.4 | ä½œè€…åè¨€ | Author ID | ä»ä¹¦ç±ä¸­æå–æˆ–å¤–éƒ¨æºè·å–åè¨€ | åè¨€åˆ—è¡¨ | `AuthorQuote` | text |
| 5.1.5 | ä½œè€…å½±å“åŠ› | Authorä¿¡æ¯ | åˆ†æä½œè€…é—´å½±å“å…³ç³» | å½±å“ç½‘ç»œ | `AuthorInfluence` | influencerId, strength |

**Authorè¡¨éœ€è¦å¡«å……çš„å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | æ•°æ®æ¥æº | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| `name` | String | ä¹¦ç±authorå­—æ®µ | å¿…å¡« |
| `aliases` | String[] | Wikipedia/Wikidata | å¯é€‰ |
| `avatarUrl` | String | Wikipediaå›¾ç‰‡ | å¯é€‰ |
| `bio` | String | Wikipediaæ‘˜è¦ | æ¨è |
| `era` | String | ä¹¦å•JSONæˆ–Wikipedia | æ¨è |
| `nationality` | String | ä¹¦å•JSONæˆ–Wikipedia | æ¨è |
| `birthPlace` | String | Wikipedia | å¯é€‰ |
| `writingStyle` | String | AIç”Ÿæˆæˆ–ç¼–è¾‘å¡«å†™ | å¯é€‰ |
| `famousWorks` | String[] | ä¹¦ç±åˆ—è¡¨è‡ªåŠ¨ç”Ÿæˆ | æ¨è |
| `literaryPeriod` | String | Wikipedia | å¯é€‰ |
| `literaryMovement` | String | Wikipedia | å¯é€‰ |
| `primaryGenres` | String[] | ä¹¦ç±åˆ†ç±»æ±‡æ€» | å¯é€‰ |
| `themes` | String[] | AIåˆ†æ | å¯é€‰ |
| `aiPersonaPrompt` | String | AIç”Ÿæˆ | å¯é€‰ |
| `bookCount` | Int | è‡ªåŠ¨è®¡ç®— | å¿…å¡« |
| `quoteCount` | Int | è‡ªåŠ¨è®¡ç®— | å¿…å¡« |
| `wikipediaUrl` | String | æœç´¢åŒ¹é… | æ¨è |
| `wikidataId` | String | Wikidata API | æ¨è |

---

#### 5.2 åˆ†ç±»æ•°æ®å¤„ç†

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | æ•°æ®è¡¨ | å¿…å¡«å­—æ®µ |
|------|------|------|----------|------|--------|----------|
| 5.2.1 | è‡ªåŠ¨åˆ†ç±» | ä¹¦ç±subjects/genres | æ˜ å°„åˆ°ç³»ç»Ÿåˆ†ç±»ä½“ç³» | åˆ†ç±»IDåˆ—è¡¨ | - | - |
| 5.2.2 | åˆ›å»ºBookCategory | ä¹¦ç±ID + åˆ†ç±»ID | åˆ›å»ºå…³è”è®°å½•ï¼Œæ ‡è®°ä¸»åˆ†ç±» | å…³è”è®°å½• | `BookCategory` | bookId, categoryId |
| 5.2.3 | æ›´æ–°åˆ†ç±»ç»Ÿè®¡ | Category ID | é‡æ–°è®¡ç®—æ¯ä¸ªåˆ†ç±»çš„bookCount | æ›´æ–°åçš„ç»Ÿè®¡ | `Category` | bookCount |

**åˆ†ç±»æ˜ å°„è§„åˆ™ï¼š**

| ä¹¦ç±å­—æ®µ | æ˜ å°„é€»è¾‘ | ç¤ºä¾‹ |
|----------|----------|------|
| `subjects` | å…³é”®è¯åŒ¹é…åˆ°Category.name | "Fiction" â†’ å°è¯´ |
| `genres` | ç›´æ¥æ˜ å°„æˆ–æ¨¡ç³ŠåŒ¹é… | "Romance" â†’ çˆ±æƒ… |
| `section` (ä¹¦å•) | æŒ‰sectionåˆ†ç»„åˆ›å»ºåˆ†ç±» | "P0æ ¸å¿ƒå¿…é€‰" â†’ ç»å…¸å¿…è¯» |

**BookCategoryè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `bookId` | UUID | ä¹¦ç±ID (å¿…å¡«) |
| `categoryId` | UUID | åˆ†ç±»ID (å¿…å¡«) |
| `isPrimary` | Boolean | æ˜¯å¦ä¸»åˆ†ç±» (ç¬¬ä¸€ä¸ªä¸ºtrue) |

---

#### 5.3 ä¹¦ç±è¯„åˆ†/ç»Ÿè®¡åˆå§‹åŒ–

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | æ•°æ®è¡¨ | å¿…å¡«å­—æ®µ |
|------|------|------|----------|------|--------|----------|
| 5.3.1 | åˆå§‹åŒ–BookStats | Book ID | åˆ›å»ºç»Ÿè®¡è®°å½•ï¼Œæ‰€æœ‰è®¡æ•°åˆå§‹åŒ–ä¸º0 | BookStatsè®°å½• | `BookStats` | bookId |
| 5.3.2 | è®¡ç®—BookScore | Bookä¿¡æ¯ | è®¡ç®—qualityScore, popularityScore, finalScore | BookScoreè®°å½• | `BookScore` | bookId, finalScore |

**BookStatsè¡¨åˆå§‹åŒ–å­—æ®µï¼š**

| å­—æ®µ | åˆå§‹å€¼ | è¯´æ˜ |
|------|--------|------|
| `viewCount` | 0 | æµè§ˆé‡ |
| `uniqueViewerCount` | 0 | ç‹¬ç«‹è®¿å®¢ |
| `bookshelfCount` | 0 | åŠ å…¥ä¹¦æ¶æ¬¡æ•° |
| `wishlistCount` | 0 | åŠ å…¥æƒ³è¯»æ¬¡æ•° |
| `readStartCount` | 0 | å¼€å§‹é˜…è¯»äººæ•° |
| `readCompleteCount` | 0 | å®Œè¯»äººæ•° |
| `totalReadingMinutes` | 0 | æ€»é˜…è¯»æ—¶é•¿ |
| `highlightCount` | 0 | åˆ’çº¿æ¬¡æ•° |
| `noteCount` | 0 | ç¬”è®°æ€»æ•° |
| `aiInteractionCount` | 0 | AIäº¤äº’æ¬¡æ•° |

**BookScoreè®¡ç®—è§„åˆ™ï¼š**

| å­—æ®µ | è®¡ç®—é€»è¾‘ | èŒƒå›´ |
|------|----------|------|
| `qualityScore` | åŸºäºisClassic, isAwardWinner, editorialScore | 0-1 |
| `popularityScore` | åˆå§‹ä¸º0ï¼Œåç»­æ ¹æ®ç”¨æˆ·è¡Œä¸ºæ›´æ–° | 0-1 |
| `freshnessScore` | åŸºäºimportedAtæ—¶é—´ | 0-1 |
| `authorPopularityScore` | åŸºäºä½œè€…bookCountå’ŒfollowerCount | 0-1 |
| `finalScore` | åŠ æƒç»¼åˆ: quality*0.4 + popularity*0.3 + freshness*0.2 + author*0.1 | 0-1 |

---

#### 5.4 å†…å®¹å¢å¼º (å¯é€‰ï¼Œéœ€é…ç½®å¼€å¯)

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | æ•°æ®è¡¨ | æ•°æ®æ¥æº |
|------|------|------|----------|------|--------|----------|
| 5.4.1 | BookContext | Bookä¿¡æ¯ | è·å–ä¹¦ç±èƒŒæ™¯ä¸Šä¸‹æ–‡ | èƒŒæ™¯æ•°æ® | `BookContext` | Wikipedia |
| 5.4.2 | ReadingGuide | Bookå†…å®¹ | AIç”Ÿæˆé˜…è¯»æŒ‡å— | æŒ‡å—æ•°æ® | `ReadingGuide` | AIç”Ÿæˆ |
| 5.4.3 | Quoteæå– | ç« èŠ‚å†…å®¹ | ä»ç« èŠ‚ä¸­æå–åè¨€é‡‘å¥ | åè¨€åˆ—è¡¨ | `Quote` | ç« èŠ‚åˆ†æ |

**BookContextè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | æ•°æ®æ¥æº | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| `sourceType` | Enum | WIKIPEDIA/STANDARD_EBOOKS/OPEN_LIBRARY | å¿…å¡« |
| `sourceUrl` | String | å¤–éƒ¨é“¾æ¥ | æ¨è |
| `summary` | String | Wikipediaæ‘˜è¦ | æ¨è |
| `creationBackground` | String | åˆ›ä½œèƒŒæ™¯ | å¯é€‰ |
| `historicalContext` | String | å†å²èƒŒæ™¯ | å¯é€‰ |
| `themes` | String | ä¸»é¢˜æ€æƒ³ | å¯é€‰ |
| `literaryStyle` | String | æ–‡å­¦é£æ ¼ | å¯é€‰ |

**ReadingGuideè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | ç”Ÿæˆæ–¹å¼ |
|------|------|----------|
| `overview` | String | AIæ‘˜è¦ |
| `readingTips` | String | AIå»ºè®® |
| `keyThemes` | Json | AIåˆ†æ |
| `discussionQuestions` | Json | AIç”Ÿæˆ |
| `relatedBooks` | Json | æ¨èç®—æ³• |

**Quoteè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `text` | String | åè¨€æ–‡æœ¬ (å¿…å¡«) |
| `textEn` | String | è‹±æ–‡åŸæ–‡ |
| `source` | Enum | BOOK/AUTHOR |
| `bookId` | UUID | å…³è”ä¹¦ç± |
| `bookTitle` | String | ä¹¦å |
| `author` | String | ä½œè€…å (å¿…å¡«) |
| `authorId` | UUID | å…³è”ä½œè€… |
| `chapter` | String | å‡ºå¤„ç« èŠ‚ |
| `tags` | String[] | æ ‡ç­¾ |

---

#### 5.5 äººç‰©å…³ç³»/æ—¶é—´çº¿ (å¯é€‰ï¼Œéœ€é…ç½®å¼€å¯)

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | æ•°æ®è¡¨ | æ•°æ®æ¥æº |
|------|------|------|----------|------|--------|----------|
| 5.5.1 | BookCharacter | ç« èŠ‚å†…å®¹ | æå–ä¹¦ä¸­äººç‰©ä¿¡æ¯ | äººç‰©åˆ—è¡¨ | `BookCharacter` | AIåˆ†æ/Wikidata |
| 5.5.2 | CharacterRelationship | äººç‰©åˆ—è¡¨ | åˆ†æäººç‰©é—´å…³ç³» | å…³ç³»æ•°æ® | `CharacterRelationship` | AIåˆ†æ |
| 5.5.3 | BookCharacterGraph | äººç‰©+å…³ç³» | ç”Ÿæˆå…³ç³»å›¾å…ƒæ•°æ® | å›¾å…ƒæ•°æ® | `BookCharacterGraph` | è®¡ç®—ç”Ÿæˆ |
| 5.5.4 | StoryEvent | ç« èŠ‚å†…å®¹ | æå–æ•…äº‹äº‹ä»¶æ—¶é—´çº¿ | äº‹ä»¶åˆ—è¡¨ | `StoryEvent` | AIåˆ†æ |

**BookCharacterè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | ä¼˜å…ˆçº§ |
|------|------|--------|
| `name` | String | å¿…å¡« |
| `aliases` | String[] | å¯é€‰ |
| `role` | Enum | å¿…å¡« (PROTAGONIST/ANTAGONIST/SUPPORTING/MINOR) |
| `shortDescription` | String | æ¨è |
| `fullDescription` | String | å¯é€‰ |
| `personality` | Json | å¯é€‰ |
| `firstAppearanceChapter` | Int | æ¨è |
| `importanceScore` | Float | å¿…å¡« (0-1) |
| `imageUrl` | String | å¯é€‰ |
| `dataSource` | Enum | å¿…å¡« (AI_GENERATED/EDITORIAL/WIKIDATA) |

**CharacterRelationshipè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `fromCharacterId` | UUID | èµ·å§‹äººç‰© (å¿…å¡«) |
| `toCharacterId` | UUID | ç›®æ ‡äººç‰© (å¿…å¡«) |
| `type` | Enum | FAMILY/ROMANTIC/FRIEND/ENEMY/COLLEAGUE/UNKNOWN |
| `description` | String | å…³ç³»æè¿° |
| `sentiment` | Enum | POSITIVE/NEGATIVE/NEUTRAL/COMPLEX |
| `strength` | Float | å…³ç³»å¼ºåº¦ 0-1 |

**StoryEventè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `title` | String | äº‹ä»¶æ ‡é¢˜ (å¿…å¡«) |
| `description` | String | äº‹ä»¶æè¿° |
| `type` | Enum | MAJOR/TURNING_POINT/CHARACTER/CONFLICTç­‰ |
| `importance` | Enum | CRITICAL/HIGH/MEDIUM/LOW |
| `chapterIndex` | Int | æ‰€åœ¨ç« èŠ‚ |
| `spoilerLevel` | Int | å‰§é€ç­‰çº§ 0-3 |
| `involvedCharacters` | String[] | ç›¸å…³äººç‰© |

---

#### 5.6 åŸé‚¦(Agora)å†…å®¹

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | æ•°æ®è¡¨ |
|------|------|------|----------|------|--------|
| 5.6.1 | åˆ›å»ºAgoraPost | Quote + Author | ä¸ºåè¨€åˆ›å»ºåŸé‚¦å¸–å­ | å¸–å­è®°å½• | `AgoraPost` |

**AgoraPostè¡¨å­—æ®µ (ä½œè€…å¸–å­ç±»å‹)ï¼š**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `postType` | String | 'AUTHOR' (ä½œè€…å‘å¸ƒ) |
| `authorId` | UUID | å…³è”ä½œè€… (å¿…å¡«) |
| `quoteId` | UUID | å…³è”åè¨€ |
| `simulatedPostTime` | DateTime | æ¨¡æ‹Ÿå‘å¸ƒæ—¶é—´ (å†å²æ—¥æœŸç©¿è¶Š) |
| `likeCount` | Int | åˆå§‹åŒ–ä¸º0 |
| `commentCount` | Int | åˆå§‹åŒ–ä¸º0 |
| `isActive` | Boolean | true |

---

### é˜¶æ®µ6: ä¹¦å•å…³è”

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | å¤±è´¥å¤„ç† |
|------|------|------|----------|------|----------|
| 6.1 | åŒ¹é…ä¹¦å• | ä¹¦ç±sectionå­—æ®µ | æŸ¥æ‰¾æˆ–åˆ›å»ºå¯¹åº”çš„BookList | BookList ID | ä»…è­¦å‘Š |
| 6.2 | æ·»åŠ ä¹¦å•é¡¹ | Book ID + BookList ID | åˆ›å»ºBookListItemè®°å½• | å…³è”è®°å½• | ä»…è­¦å‘Š |

**BookListè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `name` | String | ä¹¦å•åç§° (å¿…å¡«) |
| `type` | Enum | COLLECTION (å¯¼å…¥åˆ›å»ºçš„ä¸ºé›†åˆç±»å‹) |
| `status` | Enum | ACTIVE |

**BookListItemè¡¨å­—æ®µï¼š**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `bookListId` | UUID | ä¹¦å•ID (å¿…å¡«) |
| `bookId` | UUID | ä¹¦ç±ID (å¿…å¡«) |
| `order` | Int | æ’åº (æŒ‰å¯¼å…¥é¡ºåº) |

---

### é˜¶æ®µ7: éªŒè¯

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | å¤±è´¥å¤„ç† |
|------|------|------|----------|------|----------|
| 7.1 | APIå¥åº· | API URL | è°ƒç”¨ /api/v1/health ç«¯ç‚¹ | å¥åº·çŠ¶æ€ | è­¦å‘Šï¼Œç»§ç»­ |
| 7.2 | æŠ½æ ·éªŒè¯ | å¯¼å…¥çš„ä¹¦ç±ID | éšæœºæŠ½å–5æœ¬ä¹¦ï¼ŒéªŒè¯ç« èŠ‚/å°é¢å¯è®¿é—® | éªŒè¯ç»“æœ | è­¦å‘Šï¼Œç»§ç»­ |

**éªŒè¯æ£€æŸ¥é¡¹ï¼š**
```
- [ ] API /health è¿”å›200
- [ ] Book API /books/{id} è¿”å›æ­£ç¡®æ•°æ®
- [ ] Chapterå†…å®¹ /books/{id}/chapters/{n} å¯è®¿é—®
- [ ] Coverå›¾ç‰‡ å¯è®¿é—®ä¸”éç©º
```

---

### é˜¶æ®µ8: æŠ¥å‘Š

| èŠ‚ç‚¹ | åç§° | è¾“å…¥ | å¤„ç†é€»è¾‘ | è¾“å‡º | å¤±è´¥å¤„ç† |
|------|------|------|----------|------|----------|
| 8.1 | ç”ŸæˆæŠ¥å‘Š | æ‰€æœ‰é˜¶æ®µç»“æœ | æ±‡æ€»ç»Ÿè®¡ï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š | `PipelineReport` | - |

**æŠ¥å‘Šç»“æ„ï¼š**
```typescript
interface PipelineReport {
  batchId: string;
  environment: string;
  booklistFile: string;
  startTime: Date;
  endTime: Date;
  duration: number;  // ç§’

  summary: {
    total: number;
    matched: number;
    imported: number;
    skipped: number;
    failed: number;
  };

  storage: {
    chaptersUploaded: number;
    coversUploaded: number;
    totalSize: number;  // bytes
  };

  // å…³è”æ•°æ®ç»Ÿè®¡ (é˜¶æ®µ5)
  relatedData: {
    authors: {
      created: number;      // æ–°å»ºä½œè€…æ•°
      updated: number;      // æ›´æ–°ä½œè€…æ•°
      timelineEvents: number;  // æ—¶é—´çº¿äº‹ä»¶æ•°
      quotes: number;       // ä½œè€…åè¨€æ•°
    };
    categories: {
      bookCategories: number;  // ä¹¦ç±åˆ†ç±»å…³è”æ•°
      categoriesUpdated: number;  // æ›´æ–°åˆ†ç±»ç»Ÿè®¡æ•°
    };
    bookStats: {
      created: number;      // BookStatsè®°å½•æ•°
      scores: number;       // BookScoreè®°å½•æ•°
    };
    content: {
      bookContexts: number;   // BookContextè®°å½•æ•°
      readingGuides: number;  // ReadingGuideè®°å½•æ•°
      quotes: number;         // Quoteæå–æ•°
    };
    characters: {
      characters: number;     // BookCharacteræ•°
      relationships: number;  // CharacterRelationshipæ•°
      graphs: number;         // BookCharacterGraphæ•°
      events: number;         // StoryEventæ•°
    };
    agora: {
      posts: number;          // AgoraPostæ•°
    };
    bookLists: {
      created: number;        // æ–°å»ºä¹¦å•æ•°
      items: number;          // BookListItemå…³è”æ•°
    };
  };

  healthCheck: {
    apiHealth: boolean;
    sampleVerification: boolean;
    issues: string[];
  };

  failures: {
    book: BookItem;
    stage: string;
    error: string;
  }[];

  apiEndpoint: string;
}
```

---

## 4. Dashboard ç•Œé¢è®¾è®¡

### 4.1 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Environment Pipeline                              [å†å²è®°å½•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å‘å¯¼æ­¥éª¤                                                â”‚   â”‚
â”‚  â”‚  â‘  é€‰æ‹©ç¯å¢ƒ  â†’  â‘¡ é€‰æ‹©ä¹¦å•  â†’  â‘¢ é…ç½®é€‰é¡¹  â†’  â‘£ æ‰§è¡Œ   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å½“å‰æ­¥éª¤å†…å®¹åŒº                                          â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [æ ¹æ®å½“å‰æ­¥éª¤æ˜¾ç¤ºä¸åŒå†…å®¹]                              â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    [ä¸Šä¸€æ­¥]  [ä¸‹ä¸€æ­¥/å¼€å§‹æ‰§è¡Œ]           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ­¥éª¤1: é€‰æ‹©ç¯å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©ç›®æ ‡ç¯å¢ƒ                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ğŸ”´ Production â”‚  â”‚ ğŸŸ¡ Staging   â”‚  â”‚ ğŸŸ¢ Debugging â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ api.readmigo â”‚  â”‚ staging-api  â”‚  â”‚ debug.fly    â”‚      â”‚
â”‚  â”‚ Neon Prod    â”‚  â”‚ Neon Staging â”‚  â”‚ Neon Debug   â”‚      â”‚
â”‚  â”‚ R2 Prod      â”‚  â”‚ R2 Staging   â”‚  â”‚ R2 Debug     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ è­¦å‘Šï¼šProductionç¯å¢ƒæ“ä½œéœ€è¦é¢å¤–ç¡®è®¤                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 æ­¥éª¤2: é€‰æ‹©ä¹¦å•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©ä¹¦å•æ–‡ä»¶                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  å¯ç”¨ä¹¦å•ï¼š                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“„ v1/phase1-ebooks.json                            â”‚   â”‚
â”‚  â”‚    248æœ¬ä¹¦ | ç”Ÿæˆäº 2026-01-03                       â”‚   â”‚
â”‚  â”‚    åŒ…å«: æ ¸å¿ƒå¿…é€‰ã€ä½œè€…å…¨é›†ã€ç§‘å¹»ç»å…¸ç­‰               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“„ v1/phase1-authors.json                           â”‚   â”‚
â”‚  â”‚    100ä½ä½œè€… | ç”Ÿæˆäº 2026-01-03                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ä¹¦å•é¢„è§ˆï¼š                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ # | ä¹¦å                    | ä½œè€…           | åˆ†ç±»    â”‚   â”‚
â”‚  â”‚ 1 | Ulysses                | James Joyce    | P0æ ¸å¿ƒ  â”‚   â”‚
â”‚  â”‚ 2 | Heart of Darkness      | Joseph Conrad  | P0æ ¸å¿ƒ  â”‚   â”‚
â”‚  â”‚ 3 | Pride and Prejudice    | Jane Austen    | P0æ ¸å¿ƒ  â”‚   â”‚
â”‚  â”‚ ...                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 æ­¥éª¤3: é…ç½®é€‰é¡¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é…ç½®å¯¼å…¥é€‰é¡¹                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  åŸºæœ¬é€‰é¡¹ï¼š                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜‘ï¸ è·³è¿‡å·²å­˜åœ¨çš„ä¹¦ç± (skipExisting)                   â”‚   â”‚
â”‚  â”‚    å·²å­˜åœ¨çš„ä¹¦ç±å°†è¢«è·³è¿‡ï¼Œä¸ä¼šé‡å¤å¯¼å…¥                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  é«˜çº§é€‰é¡¹ï¼š                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å¹¶è¡Œå¤„ç†æ•°: [3] â–¼  (1-5)                             â”‚   â”‚
â”‚  â”‚ åŒæ—¶å¤„ç†çš„ä¹¦ç±æ•°é‡ï¼Œå»ºè®®3-5                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¹¦ç±æ¥æºä¼˜å…ˆçº§:                                      â”‚   â”‚
â”‚  â”‚ â—‹ è‡ªåŠ¨ (Standard Ebooksä¼˜å…ˆ)                        â”‚   â”‚
â”‚  â”‚ â—‹ ä»… Standard Ebooks                                â”‚   â”‚
â”‚  â”‚ â—‹ ä»… Project Gutenberg                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜‘ï¸ æ‰§è¡Œä¹¦ç±ä¸°å¯Œ (enrichBooks)                        â”‚   â”‚
â”‚  â”‚    å¤„ç†å°é¢ã€è®¡ç®—éš¾åº¦è¯„åˆ†ã€ç”Ÿæˆç¼©ç•¥å›¾                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.5 æ­¥éª¤4: æ‰§è¡Œé¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pipeline æ‰§è¡Œä¸­                                [å–æ¶ˆæ‰§è¡Œ]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æ€»ä½“è¿›åº¦ï¼š                                                  â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  45/248 (18%)              â”‚
â”‚                                                             â”‚
â”‚  å½“å‰é˜¶æ®µ: é˜¶æ®µ4 - ä¹¦ç±å¯¼å…¥                                  â”‚
â”‚  å½“å‰ä¹¦ç±: Pride and Prejudice                              â”‚
â”‚  å½“å‰çŠ¶æ€: æ­£åœ¨ä¸Šä¼ ç« èŠ‚åˆ°R2...                               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å¤„ç†åˆ—è¡¨                                   [ç­›é€‰ â–¼]  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ âœ… Ulysses                          å®Œæˆ | 56ç«     â”‚   â”‚
â”‚  â”‚ âœ… Heart of Darkness                å®Œæˆ | 12ç«     â”‚   â”‚
â”‚  â”‚ ğŸ”„ Pride and Prejudice              ä¸Šä¼ ä¸­...      â”‚   â”‚
â”‚  â”‚ â³ The Great Gatsby                 ç­‰å¾…ä¸­         â”‚   â”‚
â”‚  â”‚ â³ Jane Eyre                        ç­‰å¾…ä¸­         â”‚   â”‚
â”‚  â”‚ âŒ Middlemarch                      å¤±è´¥ [æŸ¥çœ‹]    â”‚   â”‚
â”‚  â”‚ â­ï¸ Emma                            å·²è·³è¿‡(å·²å­˜åœ¨)  â”‚   â”‚
â”‚  â”‚ ...                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  å®æ—¶ç»Ÿè®¡ï¼š                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ€»è®¡   â”‚ â”‚ å®Œæˆ   â”‚ â”‚ å¤„ç†ä¸­ â”‚ â”‚ è·³è¿‡   â”‚ â”‚ å¤±è´¥   â”‚   â”‚
â”‚  â”‚  248   â”‚ â”‚   42   â”‚ â”‚    3   â”‚ â”‚   12   â”‚ â”‚    1   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.6 å®ŒæˆæŠ¥å‘Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pipeline å®Œæˆ                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  âœ… Pipeline æ‰§è¡ŒæˆåŠŸ                                  â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  ç¯å¢ƒ: production                                      â•‘ â”‚
â”‚  â•‘  ä¹¦å•: v1/phase1-ebooks.json                          â•‘ â”‚
â”‚  â•‘  è€—æ—¶: 45åˆ†32ç§’                                        â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  ä¹¦ç±ç»Ÿè®¡:                                             â•‘ â”‚
â”‚  â•‘    æ€»è®¡: 248  å¯¼å…¥: 220  è·³è¿‡: 25  å¤±è´¥: 3            â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  å­˜å‚¨ç»Ÿè®¡:                                             â•‘ â”‚
â”‚  â•‘    ç« èŠ‚: 5,420ä¸ª  å°é¢: 220å¼   æ€»å¤§å°: 1.2GB          â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  å…³è”æ•°æ®ç»Ÿè®¡:                                         â•‘ â”‚
â”‚  â•‘    ä½œè€…: æ–°å»º85  æ›´æ–°35  åè¨€320  æ—¶é—´çº¿äº‹ä»¶180        â•‘ â”‚
â”‚  â•‘    åˆ†ç±»: ä¹¦ç±åˆ†ç±»å…³è”520  åˆ†ç±»æ›´æ–°18                   â•‘ â”‚
â”‚  â•‘    è¯„åˆ†: BookStats 220  BookScore 220                 â•‘ â”‚
â”‚  â•‘    å†…å®¹: èƒŒæ™¯180  æŒ‡å—180  åè¨€1,200                   â•‘ â”‚
â”‚  â•‘    äººç‰©: äººç‰©850  å…³ç³»1,200  äº‹ä»¶2,100                 â•‘ â”‚
â”‚  â•‘    åŸé‚¦: å¸–å­320  ä¹¦å•é¡¹248                           â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  å¥åº·æ£€æŸ¥: âœ… é€šè¿‡                                     â•‘ â”‚
â”‚  â•‘    - APIå¥åº·: âœ…                                       â•‘ â”‚
â”‚  â•‘    - æŠ½æ ·éªŒè¯: âœ… (5/5)                                â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  APIç«¯ç‚¹: https://api.readmigo.app/api/v1             â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                             â”‚
â”‚  å¤±è´¥ä¹¦ç±è¯¦æƒ…ï¼š                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¹¦å              | é˜¶æ®µ      | é”™è¯¯åŸå›             â”‚   â”‚
â”‚  â”‚ Middlemarch       | 3.1åŒ¹é…   | SEæœªæ‰¾åˆ°æ­¤ä¹¦        â”‚   â”‚
â”‚  â”‚ The Possessed     | 4.2ä¸‹è½½   | EPUBä¸‹è½½è¶…æ—¶        â”‚   â”‚
â”‚  â”‚ Faust             | 4.4ç« èŠ‚   | ç« èŠ‚ç»“æ„è§£æå¤±è´¥    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  [æŸ¥çœ‹å®Œæ•´æ—¥å¿—]  [å¯¼å‡ºæŠ¥å‘Š]  [è¿”å›é¦–é¡µ]                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. API è®¾è®¡

### 5.1 ç«¯ç‚¹åˆ—è¡¨

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `GET` | `/admin/pipeline/booklists` | è·å–å¯ç”¨ä¹¦å•åˆ—è¡¨ |
| `GET` | `/admin/pipeline/booklists/:path/preview` | é¢„è§ˆä¹¦å•å†…å®¹ |
| `POST` | `/admin/pipeline/start` | å¯åŠ¨Pipeline |
| `GET` | `/admin/pipeline/:id/status` | è·å–æ‰§è¡ŒçŠ¶æ€ |
| `GET` | `/admin/pipeline/:id/books` | è·å–ä¹¦ç±å¤„ç†åˆ—è¡¨ |
| `POST` | `/admin/pipeline/:id/cancel` | å–æ¶ˆæ‰§è¡Œ |
| `GET` | `/admin/pipeline/history` | è·å–å†å²è®°å½• |
| `GET` | `/admin/pipeline/:id/report` | è·å–å®Œæ•´æŠ¥å‘Š |

### 5.2 è¯·æ±‚/å“åº”ç¤ºä¾‹

**å¯åŠ¨Pipeline:**
```typescript
// POST /admin/pipeline/start
// Request
{
  "environment": "production",
  "booklistPath": "v1/phase1-ebooks.json",
  "options": {
    "skipExisting": true,
    "parallel": 3,
    "source": "AUTO",
    "enrichBooks": true
  }
}

// Response
{
  "id": "pipeline_abc123",
  "batchId": "batch_xyz789",
  "status": "running",
  "createdAt": "2026-01-18T10:00:00Z"
}
```

**è·å–çŠ¶æ€:**
```typescript
// GET /admin/pipeline/:id/status
// Response
{
  "id": "pipeline_abc123",
  "status": "running",
  "currentStage": "4",
  "currentStageName": "ä¹¦ç±å¯¼å…¥",
  "progress": {
    "total": 248,
    "completed": 45,
    "skipped": 12,
    "failed": 1,
    "percentage": 18
  },
  "currentBook": {
    "title": "Pride and Prejudice",
    "author": "Jane Austen",
    "status": "uploading"
  },
  "startTime": "2026-01-18T10:00:00Z",
  "elapsedSeconds": 1200
}
```

---

## 6. æŠ€æœ¯å®ç°

### 6.1 åç«¯æ¨¡å—ç»“æ„

```
apps/backend/src/modules/pipeline/
â”œâ”€â”€ pipeline.module.ts
â”œâ”€â”€ pipeline.controller.ts
â”œâ”€â”€ pipeline.service.ts
â”œâ”€â”€ pipeline.processor.ts          # åå°ä»»åŠ¡å¤„ç†å™¨
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ start-pipeline.dto.ts
â”‚   â”œâ”€â”€ pipeline-status.dto.ts
â”‚   â””â”€â”€ pipeline-report.dto.ts
â”œâ”€â”€ interfaces/
â”‚   â”œâ”€â”€ book-item.interface.ts
â”‚   â”œâ”€â”€ matched-book.interface.ts
â”‚   â””â”€â”€ pipeline-config.interface.ts
â””â”€â”€ services/
    â”œâ”€â”€ booklist.service.ts        # ä¹¦å•è¯»å–æœåŠ¡
    â”œâ”€â”€ book-matcher.service.ts    # ä¹¦ç±åŒ¹é…æœåŠ¡
    â””â”€â”€ progress-tracker.service.ts # è¿›åº¦è¿½è¸ªæœåŠ¡
```

### 6.2 Dashboard é¡µé¢ç»“æ„

```
apps/dashboard/src/pages/pipeline/
â”œâ”€â”€ index.tsx
â”œâ”€â”€ PipelineDashboard.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ EnvironmentStep.tsx
â”‚   â”œâ”€â”€ BooklistStep.tsx
â”‚   â”œâ”€â”€ OptionsStep.tsx
â”‚   â”œâ”€â”€ ExecutionPanel.tsx
â”‚   â”œâ”€â”€ BookStatusList.tsx
â”‚   â”œâ”€â”€ ProgressBar.tsx
â”‚   â”œâ”€â”€ ReportPanel.tsx
â”‚   â””â”€â”€ PipelineHistory.tsx
â””â”€â”€ hooks/
    â”œâ”€â”€ usePipelineStatus.ts       # çŠ¶æ€è½®è¯¢hook
    â””â”€â”€ useBooklists.ts            # ä¹¦å•åŠ è½½hook
```

### 6.3 å¤ç”¨ç°æœ‰æ¨¡å—

| ç°æœ‰æ¨¡å— | å¤ç”¨æ–¹å¼ |
|---------|---------|
| `StandardEbooksImporter` | å¤ç”¨EPUBä¸‹è½½å’Œè§£æé€»è¾‘ |
| `BookEnrichmentService` | å¤ç”¨å°é¢å¤„ç†ã€éš¾åº¦è®¡ç®— |
| `StorageService` | å¤ç”¨R2ä¸Šä¼ é€»è¾‘ |
| `ImportBatchService` | å¤ç”¨æ‰¹æ¬¡ç®¡ç† |
| `PrismaService` | æ•°æ®åº“æ“ä½œ |

### 6.4 æ•°æ®åº“å˜æ›´

```prisma
// åœ¨ç°æœ‰ ImportBatch æ¨¡å‹æ–°å¢å­—æ®µ
model ImportBatch {
  // ... ç°æœ‰å­—æ®µ

  // æ–°å¢
  booklistFile    String?   // ä¹¦å•æ–‡ä»¶è·¯å¾„
  pipelineConfig  Json?     // Pipelineé…ç½®JSON
  pipelineStage   String?   // å½“å‰é˜¶æ®µ: "1" - "7"
  currentBookId   String?   // å½“å‰å¤„ç†çš„ä¹¦ç±
}
```

---

## 7. é”™è¯¯å¤„ç†ç­–ç•¥

### 7.1 é˜¶æ®µçº§é”™è¯¯

| é˜¶æ®µ | é”™è¯¯ç±»å‹ | å¤„ç†ç­–ç•¥ |
|------|----------|----------|
| 1-2 | é…ç½®/è¿æ¥é”™è¯¯ | ç»ˆæ­¢Pipelineï¼Œæç¤ºé”™è¯¯ |
| 3 | åŒ¹é…å¤±è´¥ | è®°å½•å¤±è´¥ï¼Œç»§ç»­å…¶ä»–ä¹¦ç± |
| 4 | å•æœ¬å¤„ç†å¤±è´¥ | è®°å½•å¤±è´¥ï¼Œç»§ç»­ä¸‹ä¸€æœ¬ |
| 5-6 | åå¤„ç†/éªŒè¯å¤±è´¥ | ä»…è­¦å‘Šï¼ŒPipelineæ ‡è®°å®Œæˆ |

### 7.2 é‡è¯•ç­–ç•¥

| æ“ä½œ | é‡è¯•æ¬¡æ•° | é‡è¯•é—´éš” |
|------|----------|----------|
| EPUBä¸‹è½½ | 3æ¬¡ | 5ç§’ |
| R2ä¸Šä¼  | 3æ¬¡ | 3ç§’ |
| DBå†™å…¥ | 2æ¬¡ | 1ç§’ |

---

## 8. æ€§èƒ½è€ƒè™‘

### 8.1 å¹¶è¡Œå¤„ç†

- é»˜è®¤å¹¶è¡Œæ•°: 3
- æœ€å¤§å¹¶è¡Œæ•°: 5
- æ¯æœ¬ä¹¦ç‹¬ç«‹å¤„ç†ï¼Œäº’ä¸é˜»å¡

### 8.2 èµ„æºé™åˆ¶

- å•ä¸ªEPUBæœ€å¤§: 50MB
- ç« èŠ‚HTMLæœ€å¤§: 2MB
- å°é¢å›¾ç‰‡æœ€å¤§: 5MB

### 8.3 é¢„ä¼°è€—æ—¶

| ä¹¦ç±æ•°é‡ | å¹¶è¡Œæ•° | é¢„ä¼°è€—æ—¶ |
|----------|--------|----------|
| 50æœ¬ | 3 | ~15åˆ†é’Ÿ |
| 100æœ¬ | 3 | ~30åˆ†é’Ÿ |
| 248æœ¬ | 3 | ~75åˆ†é’Ÿ |

---

## 9. å®‰å…¨è€ƒè™‘

### 9.1 æƒé™æ§åˆ¶

- ä»…ç®¡ç†å‘˜å¯è®¿é—®PipelineåŠŸèƒ½
- Productionç¯å¢ƒéœ€è¦äºŒæ¬¡ç¡®è®¤

### 9.2 æ“ä½œå®¡è®¡

- æ‰€æœ‰Pipelineæ“ä½œè®°å½•åˆ°ImportBatch
- æ”¯æŒæŸ¥çœ‹å†å²æ‰§è¡Œè®°å½•

---

## 10. å¾…ç¡®è®¤é—®é¢˜

1. **ä¹¦å•æ‰©å±•**ï¼šæ˜¯å¦éœ€è¦æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰ä¹¦å•æ–‡ä»¶ï¼Ÿ
2. **æ–­ç‚¹ç»­ä¼ **ï¼šPipelineä¸­æ–­åæ˜¯å¦éœ€è¦æ”¯æŒä»æ–­ç‚¹æ¢å¤ï¼Ÿ
3. **é€šçŸ¥æœºåˆ¶**ï¼šPipelineå®Œæˆåæ˜¯å¦éœ€è¦å‘é€é€šçŸ¥ï¼ˆé‚®ä»¶/æ¶ˆæ¯ï¼‰ï¼Ÿ
4. **å¹¶å‘é™åˆ¶**ï¼šæ˜¯å¦å…è®¸åŒä¸€ç¯å¢ƒåŒæ—¶è¿è¡Œå¤šä¸ªPipelineï¼Ÿ
